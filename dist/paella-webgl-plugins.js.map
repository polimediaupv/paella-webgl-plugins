{"version":3,"file":"paella-webgl-plugins.js","mappings":"CAAA,SAA2CA,EAAMC,GAC1B,iBAAZC,SAA0C,iBAAXC,OACxCA,OAAOD,QAAUD,EAAQG,QAAQ,gBACR,mBAAXC,QAAyBA,OAAOC,IAC9CD,OAAO,CAAC,eAAgBJ,GACE,iBAAZC,QACdA,QAAQ,wBAA0BD,EAAQG,QAAQ,gBAElDJ,EAAK,wBAA0BC,EAAQD,OAAKO,GAC7C,CATD,CASGC,MAAOC,G,29BCNV,IAAIC,EAAiB,KAEAC,EAAAA,SAAAA,I,iuBACjB,WAII,OAHKD,IACDA,EAAiB,IAAIC,GAElBD,CACV,K,yBAED,WACI,MAAO,sBACV,G,yBAED,WACI,M,QACH,M,6BAdgBC,CAA2BC,EAAAA,a,knCCJ3BC,EAAAA,WACjB,WAAYC,GAGR,G,4FAHgB,SAChBC,KAAKC,GAAKF,EAAOG,WAAW,SAEZ,OAAZF,KAAKC,GACL,MAAM,IAAIE,MAAM,sCAEvB,C,wEAED,sJAA2C,CAAC,EAA5C,IAAaC,WAAAA,OAAb,MAA0B,CAAC,EAAG,EAAG,EAAG,GAApC,GACUH,EAAKD,KAAKC,IACbI,OAAOJ,EAAGK,YACbL,EAAGG,WAAH,MAAAH,EAAE,EAAeG,IACjBH,EAAGM,MAAMN,EAAGO,iBAAmBP,EAAGQ,kBAJtC,+C,oPATiBX,G,sKCArB,IAeMY,EAAa,SAACT,EAAIU,EAAMC,GAC1B,IAAMC,EAASZ,EAAGa,aAAaH,GAM/B,OALAV,EAAGc,aAAaF,EAAQD,GACxBX,EAAGe,cAAcH,GACZZ,EAAGgB,mBAAmBJ,EAAQZ,EAAGiB,iBAClCC,QAAQC,MAAR,oCAA2CnB,EAAGoB,iBAAiBR,KAE5DA,CACV,EAEoBS,EAAAA,WACjB,WAAYrB,EAAZ,GAAqG,eAAnFsB,OAAAA,OAAmF,MA1BnF,wFA0BmF,MAA3DC,SAAAA,OAA2D,MAjBjF,qEAiBiF,MAA/BC,QAAAA,OAA+B,MAArB,GAAqB,MAAjBC,SAAAA,OAAiB,MAAN,GAAM,G,4FAAA,SACjG1B,KAAKC,GAAKA,EACV,IAAM0B,EAAUjB,EAAWT,EAAIA,EAAG2B,cAAeL,GAC3CM,EAAUnB,EAAWT,EAAIA,EAAG6B,gBAAiBN,GAE7CO,EAAgB9B,EAAG+B,gBACzB/B,EAAGgC,aAAaF,EAAeJ,GAC/B1B,EAAGgC,aAAaF,EAAeF,GAC/B5B,EAAGiC,YAAYH,GAEV9B,EAAGkC,oBAAoBJ,EAAe9B,EAAGmC,cAC1CjB,QAAQC,MAAR,+CAAsDnB,EAAGoC,kBAAkBN,KAG/E9B,EAAGqC,aAAaX,GAChB1B,EAAGqC,aAAaT,GAChB7B,KAAKuC,eAAiBR,EAEtB/B,KAAKyB,QAAU,CAAC,EAChBA,EAAQe,SAAQ,SAAAC,GACZ,EAAKhB,QAAQgB,GAAUxC,EAAGyC,kBAAkBX,EAAeU,IAC9B,GAAzB,EAAKhB,QAAQgB,IACbtB,QAAQwB,KAAR,0CAAgDF,EAAhD,KAEP,IAGDzC,KAAK0B,SAAW,CAAC,EACjBA,EAASc,SAAQ,SAAAI,GACb,EAAKlB,SAASkB,GAAW3C,EAAG4C,mBAAmBd,EAAea,GAC/B,OAA3B,EAAKlB,SAASkB,IACdzB,QAAQwB,KAAR,uCAA6CC,GAEpD,GACJ,C,+CAED,WACI5C,KAAKC,GAAG6C,WAAW9C,KAAKuC,eAC3B,G,iCAED,SAAoBQ,EAAYC,GAC5BA,EAAaC,gBACbjD,KAAKkD,YAAYH,EAAY,EAChC,G,iCAED,SAAoBA,EAAYC,GAC5BA,EAAaG,eACbnD,KAAKkD,YAAYH,EAAY,EAChC,G,yBAED,SAAYA,EAAYK,GACpB,IAAQnD,EAAOD,KAAPC,GACRA,EAAGoD,wBAAwBrD,KAAKyB,QAAQsB,IACxC9C,EAAGqD,oBAAoBtD,KAAKyB,QAAQsB,GAAaK,EAAenD,EAAGsD,OAAO,EAAO,EAAG,EACvF,G,yBAED,SAAYC,EAAaC,GACrB,IAAQxD,EAAOD,KAAPC,GACRA,EAAGyD,cAAczD,EAAG0D,UACpB1D,EAAG2D,YAAY3D,EAAG4D,WAAYJ,GAC9BxD,EAAG6D,UAAU9D,KAAK0B,SAAS8B,GAAc,EAC5C,G,uBAED,SAAUA,EAAaO,GACnB/D,KAAKC,GAAG+D,UAAUhE,KAAK0B,SAAS8B,GAAcO,EACjD,G,yBAED,SAAYP,EAAaO,GACrB/D,KAAKC,GAAGgE,iBAAiBjE,KAAK0B,SAAS8B,IAAc,EAAOO,EAC/D,M,mBAtEgBzC,G,sKCzBrB,SAAS4C,EAAmBjE,EAAIkE,GAC5B,IAAMC,EAASnE,EAAGoE,eAGlB,OAFApE,EAAGqE,WAAWrE,EAAGsE,aAAcH,GAC/BnE,EAAGuE,WAAWvE,EAAGsE,aAAc,IAAIE,aAAaN,GAAalE,EAAGyE,aACzDN,CACV,C,IASoBO,EAAAA,WACjB,WAAY1E,EAAI2E,EAAUC,EAAUC,I,4FAAO,SACvC9E,KAAKC,GAAKA,EACVD,KAAK+E,cAAgBH,EACrB5E,KAAKgF,eAAiBd,EAAmBjE,EAAI2E,GAC7C5E,KAAKiF,cAAgBJ,EACrB7E,KAAKkF,eAAiBhB,EAAmBjE,EAAI4E,GAC7C7E,KAAKmF,WAAaL,EAClB9E,KAAKoF,YAfb,SAA2BnF,EAAIoF,GAC3B,IAAMjB,EAASnE,EAAGoE,eAGlB,OAFApE,EAAGqE,WAAWrE,EAAGqF,qBAAsBlB,GACvCnE,EAAGuE,WAAWvE,EAAGqF,qBAAsB,IAAIC,YAAYF,GAAYpF,EAAGyE,aAC/DN,CACV,CAU0BoB,CAAkBvF,EAAI6E,EAC5C,C,kDAED,WACI9E,KAAKC,GAAGqE,WAAWtE,KAAKC,GAAGsE,aAAcvE,KAAKgF,eACjD,G,0BAED,WACIhF,KAAKC,GAAGqE,WAAWtE,KAAKC,GAAGsE,aAAcvE,KAAKkF,eACjD,G,kBAED,WACIlF,KAAKC,GAAGqE,WAAWtE,KAAKC,GAAGqF,qBAAsBtF,KAAKoF,aACtDpF,KAAKC,GAAGwF,aAAazF,KAAKC,GAAGyF,UAAW1F,KAAKmF,WAAWQ,OAAQ3F,KAAKC,GAAG2F,eAAgB,EAC3F,M,mBAtBgBjB,G,0KCbAkB,EAAAA,WACjB,WAAY5F,EAAI6F,I,4FAAO,SACnB9F,KAAKC,GAAKA,EACVD,KAAK8F,MAAQA,EACb9F,KAAKyD,QAAUxD,EAAG8F,gBAClB9F,EAAG2D,YAAY3D,EAAG4D,WAAY7D,KAAKyD,SAEnC,IAAMuC,EAAQ,IAAIC,WAAW,CAAC,EAAG,EAAG,IAAK,MACzChG,EAAGiG,WAAWjG,EAAG4D,WAAW,EAAE5D,EAAGkG,KAAK,EAAE,EAAE,EAAElG,EAAGkG,KAAKlG,EAAGmG,cAAcJ,GAErE/F,EAAGoG,cAAcpG,EAAG4D,WAAY5D,EAAGqG,eAAgBrG,EAAGsG,eACtDtG,EAAGoG,cAAcpG,EAAG4D,WAAY5D,EAAGuG,eAAgBvG,EAAGsG,eACtDtG,EAAGoG,cAAcpG,EAAG4D,WAAY5D,EAAGwG,mBAAoBxG,EAAGyG,OAC7D,C,kDAED,WACI,IAAQzG,EAAOD,KAAPC,GACRA,EAAG2D,YAAY3D,EAAG4D,WAAY7D,KAAKyD,SACnCxD,EAAGiG,WAAWjG,EAAG4D,WAAY,EAAG5D,EAAGkG,KAAMlG,EAAGkG,KAAMlG,EAAGmG,cAAepG,KAAK8F,MAC5E,M,mBAnBgBD,G,s7BCDd,IAAMc,EAAmB,EAAVC,KAAKC,GAEdC,EAAeF,KAAKC,GAAK,EAW/B,SAASE,EAAYC,EAAOC,EAAKlD,GACvC,OAAQA,EAAQiD,IAAUC,EAAMD,EAChC,CAGM,SAASE,EAAaC,GAS5B,IARA,IAfoD,EAAlBC,EAAQC,EAAKC,EAezCC,EAAcX,KAAKC,GAAKM,EACxBK,EAA2B,EAAVL,EAGjBM,EAAY,GACZC,EAAM,GACRC,GAAYf,KAAKC,GAAK,EAElBe,EAAI,EAAGA,GAAKT,EAASS,IAAI,CAKhC,IAJA,IAAMC,EAAId,GAAaD,EAAcA,GAAea,GAChDG,EAAY,EACZC,EAAaP,GAAmBI,EAAI,GAAKA,EAAIT,EAAW,EAAI,GAEvDa,EAAI,EAAGA,EAAID,EAAYC,IAC/BP,EAAUQ,WA7BwC,OAAlBb,OAAQC,EAAKC,SAAbF,GAAkB,IA6BjB,CAAC,EAAGO,EAAUG,GA7BG,OAAVT,EAAU,KACpDC,IAD+CA,EAAK,MACvCV,KAAKC,GAAK,EAChB,CACNO,EAASR,KAAKsB,IAAIb,GAAOT,KAAKsB,IAAIZ,GAClCF,EAASR,KAAKuB,IAAId,GAClBD,GAAUR,KAAKsB,IAAIb,GAAOT,KAAKuB,IAAIb,MAyBlCI,EAAIO,KAAK,CAAClB,EAAY,EAAGJ,EAAQmB,GAAYD,IAC7CC,GAAaP,EAEdI,GAAYJ,CACZ,CAID,IADA,IAAMa,EAAS,GACPR,EAAI,EAAGA,EAAIH,EAAU9B,OAAQiC,IACpCQ,EAAOH,KAAK,CAAC,EAAG,EAAG,IAMpB,IAFA,IAAMI,EAAY,GACdC,EAAa,EACTC,EAAO,EAAGA,EAAOpB,EAASoB,IAAO,CAExC,IADA,IAAMC,EAAcD,EAAO,EAAI,EAAI,EAC1BE,EAAY,EAAGA,EAAYjB,EAAgBiB,IAAY,CAC/D,IAAMC,EAAQJ,EAAaG,EACrBE,EAAQL,EAAaG,EAAY,EACjCG,EAAYF,EAAQlB,EAAiBgB,EACrCK,EAAgBF,EAAQnB,EAAiBgB,EAEnC,IAATD,GACFF,EAAUJ,KAAK,CAACS,EAAOG,EAAeD,IAEpCL,IAASpB,EAAU,GACrBkB,EAAUJ,KAAK,CAACS,EAAOC,EAAOC,IAE5BL,EAAO,GAAKA,EAAOpB,EAAU,GAAKA,EAAU,IAC9CkB,EAAUJ,KAAK,CAACS,EAAOG,EAAeD,IACtCP,EAAUJ,KAAK,CAACS,EAAOC,EAAOE,IAE/B,CAEAP,GADW,IAATC,EACYf,EAEAA,EAAiB,CAEhC,CAGD,MAAO,CACNC,UAAWA,EAAUqB,OACrBV,OAAQA,EAAOU,OACfT,UAAWA,EAAUS,OACrBpB,IAAKA,EAAIoB,OACTC,QAAStB,EAAUqB,OAEpB,CChFM,IAiCME,EAAevE,aCffwE,GDgBoBC,aC3BZC,KAAKC,MAWD,SAACvB,GACtB,OAAOA,GAAE,MAAYA,EDWF,KCXc,EAAEA,CACtC,GAEYwB,EAAS,SAACxB,GACnB,OAAwB,IAAjBoB,EAAUpB,EACpB,EAEYyB,EAAS,SAACC,EAAEC,GACrB,OAAO5C,KAAK6C,IAAIF,EAAIC,GDGD,ICFtB,E,w4BCxBD,IAAME,EAAmB,SAACC,EAAGC,GACzB,GAAID,EAAGhE,QAAQiE,EAAGjE,OAAQ,MAAM,IAAIxF,MAAJ,qCACnC,EAEoB0J,EAAAA,SAAAA,I,4oBACjB,aAAc,MACV,OADU,UACFC,UAAUnE,QAClB,KAAK,EACD,cAAM,CAAC,EAAG,IACV,MACJ,KAAK,EACGmE,UAAU,GAAGnE,OAAO,GAAKmE,UAAU,GAAGnE,OAAO,IAE7C,cAAMmE,UAAU,KAEpB,MACJ,KAAK,EAC2B,IAAxBA,UAAU,GAAGnE,QAAyC,iBAAlBmE,UAAU,GAE9C,cAAM,CAAEA,UAAU,GAAG,GAAIA,UAAU,GAAG,GAAIA,UAAU,KAEvB,IAAxBA,UAAU,GAAGnE,QACO,iBAAlBmE,UAAU,GAEjB,cAAM,CAAEA,UAAU,GAAG,GAAIA,UAAU,GAAG,GAAIA,UAAU,GAAG,GAAIA,UAAU,KAEvC,iBAAlBA,UAAU,IACG,iBAAlBA,UAAU,KAEjB,cAAM,CAACA,UAAU,GAAGA,UAAU,MAElC,MACJ,KAAK,EAC2B,IAAxBA,UAAU,GAAGnE,QACY,iBAAlBmE,UAAU,IAA6C,iBAAlBA,UAAU,GAEtD,cAAM,CAAEA,UAAU,GAAG,GAAIA,UAAU,GAAG,GAAIA,UAAU,GAAIA,UAAU,KAEpC,iBAAlBA,UAAU,IACG,iBAAlBA,UAAU,IACQ,iBAAlBA,UAAU,KAEjB,cAAM,CAACA,UAAU,GAAGA,UAAU,GAAGA,UAAU,MAE/C,MACJ,KAAK,EACD,cAAM,CAACA,UAAU,GAAGA,UAAU,GAAGA,UAAU,GAAGA,UAAU,KACxD,MACJ,QACI,MAAM,IAAI3J,MAAJ,yCA5CA,WA8Cb,C,qCAED,WACI,IAAM4J,EAAIF,EAAIG,UAAUhK,MACxB,OAAQA,KAAK2F,QACb,KAAK,EACD3F,KAAK,GAAKA,KAAK,GAAK+J,EACxB,KAAK,EACD/J,KAAK,GAAKA,KAAK,GAAK+J,EACxB,KAAK,EACD/J,KAAK,GAAKA,KAAK,GAAK+J,EACpB/J,KAAK,GAAKA,KAAK,GAAK+J,EACpB,MACJ,QACI,MAAM,IAAI5J,MAAJ,+BAAmCH,KAAK2F,SAElD,OAAO3F,IACV,G,oBAED,SAAOiK,GAEH,OADAP,EAAiB1J,KAAKiK,GACdjK,KAAK2F,QACb,KAAK,EACD3F,KAAK,GAAKiK,EAAI,GAClB,KAAK,EACDjK,KAAK,GAAKiK,EAAI,GAClB,KAAK,EACDjK,KAAK,GAAKiK,EAAI,GACdjK,KAAK,GAAKiK,EAAI,GACd,MACJ,QACI,MAAM,IAAI9J,MAAJ,+BAAmCH,KAAK2F,SAErD,G,iBAED,SAAIuE,EAAGC,GAAuB,IAApBC,EAAoB,uDAAhB,KAAMC,EAAU,uDAAN,KACpB,GAAoB,IAAhBrK,KAAK2F,OACL3F,KAAK,GAAKkK,EACVlK,KAAK,GAAKmK,OAET,GAAoB,IAAhBnK,KAAK2F,QAAsB,OAANyE,EAC1BpK,KAAK,GAAKkK,EACVlK,KAAK,GAAKmK,EACVnK,KAAK,GAAKoK,MAET,IAAoB,IAAhBpK,KAAK2F,QAAsB,OAAN0E,EAO1B,MAAM,IAAIlK,MAAJ,+BAAmCH,KAAK2F,OAAxC,6BAAoEuE,EAApE,eAA4EC,EAA5E,eAAoFC,EAApF,eAA4FC,IANlGrK,KAAK,GAAKkK,EACVlK,KAAK,GAAKmK,EACVnK,KAAK,GAAKoK,EACVpK,KAAK,GAAKqK,CAIb,CACJ,G,mBAED,SAAMC,GACF,OAAQtK,KAAK2F,QACb,KAAK,EACD3F,KAAK,GAAKA,KAAK,GAAKsK,EACxB,KAAK,EACDtK,KAAK,GAAKA,KAAK,GAAKsK,EACxB,KAAK,EACDtK,KAAK,GAAKA,KAAK,GAAKsK,EACpBtK,KAAK,GAAKA,KAAK,GAAKsK,EACpB,MACJ,QACI,MAAM,IAAInK,MAAJ,+BAAmC0H,EAAElC,SAE/C,OAAO3F,IACV,G,aAED,WACI,OAAOA,KAAK,EACf,E,IAcD,SAAM6H,GAEF,OADA7H,KAAK,GAAK6H,EACH7H,IACV,G,aAfD,WACI,OAAOA,KAAK,EACf,E,IAeD,SAAM6H,GAEF,OADA7H,KAAK,GAAK6H,EACH7H,IACV,G,aAhBD,WACI,OAAOA,KAAK,EACf,E,IAgBD,SAAM6H,GAEF,OADA7H,KAAK,GAAK6H,EACH7H,IACV,G,aAjBD,WACI,OAAOA,KAAK,EACf,E,IAiBD,SAAM6H,GAEF,OADA7H,KAAK,GAAK6H,EACH7H,IACV,G,aAED,WACI,OAAOA,KAAK,EACf,E,IAcD,SAAM6H,GAEF,OADA7H,KAAK,GAAK6H,EACH7H,IACV,G,aAfD,WACI,OAAOA,KAAK,EACf,E,IAeD,SAAM6H,GAEF,OADA7H,KAAK,GAAK6H,EACH7H,IACV,G,aAhBD,WACI,OAAOA,KAAK,EACf,E,IAgBD,SAAM6H,GAEF,OADA7H,KAAK,GAAK6H,EACH7H,IACV,G,aAjBD,WACI,OAAOA,KAAK,EACf,E,IAiBD,SAAM6H,GAEF,OADA7H,KAAK,GAAK6H,EACH7H,IACV,G,iBAED,WACI,OAAQA,KAAK2F,QACb,KAAK,EACD,OAAO3F,KAAK,GAChB,KAAK,EACD,OAAOA,KAAK,GAChB,QACI,MAAM,IAAIG,MAAM,kFAEvB,E,IAaD,SAAUkK,GAEN,OADArK,KAAK,GAAKqK,EACHrK,IACV,G,kBAdD,WACI,OAAQA,KAAK2F,QACT,KAAK,EACD,OAAO3F,KAAK,GAChB,KAAK,EACD,OAAOA,KAAK,GAChB,QACI,MAAM,IAAIG,MAAM,kFAE3B,E,IAOD,SAAWoK,GAEP,OADAvK,KAAK,GAAKuK,EACHvK,IACV,G,cAED,WACI,OAAQA,KAAK2F,QACb,KAAK,EACD,OAAO,IAAIkE,EAAI7J,MACnB,KAAK,EACL,KAAK,EACD,OAAO,IAAI6J,EAAI7J,KAAK,GAAIA,KAAK,IACjC,QACI,MAAM,IAAIG,MAAJ,+BAAmCH,KAAK2F,SAErD,E,IAwBD,SAAOkC,GAGH,OAFA7H,KAAK,GAAK6H,EAAE,GACZ7H,KAAK,GAAK6H,EAAE,GACL7H,IACV,G,cA1BD,WACI,OAAQA,KAAK2F,QACb,KAAK,EACL,KAAK,EACD,OAAO,IAAIkE,EAAI7J,KAAK,GAAIA,KAAK,IAEjC,QACI,MAAM,IAAIG,MAAJ,+BAAmCH,KAAK2F,SAErD,E,IAmBD,SAAOkC,GACH,GAAI7H,KAAK2F,OAAO,EACZ,MAAM,IAAIxF,MAAM,uBAIpB,OAFAH,KAAK,GAAK6H,EAAE,GACZ7H,KAAK,GAAK6H,EAAE,GACL7H,IACV,G,cAxBD,WACI,OAAQA,KAAK2F,QACb,KAAK,EACL,KAAK,EACD,OAAO,IAAIkE,EAAI7J,KAAK,GAAIA,KAAK,IAEjC,QACI,MAAM,IAAIG,MAAJ,+BAAmCH,KAAK2F,SAErD,E,IAiBD,SAAOkC,GACH,GAAI7H,KAAK2F,OAAO,EACZ,MAAM,IAAIxF,MAAM,uBAIpB,OAFAH,KAAK,GAAK6H,EAAE,GACZ7H,KAAK,GAAK6H,EAAE,GACL7H,IACV,G,eAED,WACI,GAAIA,KAAK2F,OAAS,EACd,MAAM,IAAIxF,MAAJ,+BAAmCH,KAAK2F,SAElD,OAAO,IAAIkE,EAAI7J,KAAK,GAAIA,KAAK,GAAIA,KAAK,GACzC,E,IAED,SAAQ6H,GACJ,GAAIA,EAAElC,OAAO,GAAK3F,KAAK2F,OAAO,EAC1B,MAAM,IAAIxF,MAAJ,wCAA4CH,KAAK2F,OAAjD,eAA+DkC,EAAElC,SAK3E,OAHA3F,KAAK,GAAK6H,EAAE,GACZ7H,KAAK,GAAK6H,EAAE,GACZ7H,KAAK,GAAK6H,EAAE,GACL7H,IACV,G,gBAGD,WACI,GAAIA,KAAK2F,OAAS,EACd,MAAM,IAAIxF,MAAJ,+BAAmCH,KAAK2F,OAAxC,iBAEV,OAAO,IAAIkE,EAAI7J,KAAK,GAAIA,KAAK,GAAIA,KAAK,GAAIA,KAAK,GAClD,E,IAGD,SAAS6H,GACL,GAAI7H,KAAK2F,OAAS,GAAKkC,EAAElC,OAAO,EAC5B,MAAM,IAAIxF,MAAJ,wCAA4CH,KAAK2F,OAAjD,eAA+DkC,EAAElC,SAM3E,OAJA3F,KAAK,GAAK6H,EAAE,GACZ7H,KAAK,GAAK6H,EAAE,GACZ7H,KAAK,GAAK6H,EAAE,GACZ7H,KAAK,GAAK6H,EAAE,GACL7H,IACV,G,eAED,WACI,GAAIA,KAAK2F,OAAS,EACd,MAAM,IAAIxF,MAAJ,+BAAkCH,KAAK2F,OAAvC,8BAEV,OAAO,IAAIkE,EAAI7J,KAAK,GAAGA,KAAK,GAAGA,KAAK,GACvC,E,IAED,SAAQ6H,GACJ,GAAIA,EAAElC,OAAO,GAAK3F,KAAK2F,OAAO,EAC1B,MAAM,IAAIxF,MAAJ,wCAA4CH,KAAK2F,OAAjD,eAA+DkC,EAAElC,SAK3E,OAHA3F,KAAK,GAAK6H,EAAE,GACZ7H,KAAK,GAAK6H,EAAE,GACZ7H,KAAK,GAAK6H,EAAE,GACL7H,IACV,G,cAED,WACI,GAAI6H,EAAElC,OAAO,GAAK3F,KAAK2F,OAAO,EAC1B,MAAM,IAAIxF,MAAJ,wCAA4CH,KAAK2F,OAAjD,eAA+DkC,EAAElC,SAE3E,OAAO,IAAIkE,EAAI7J,KAAK,GAAIA,KAAK,GAChC,G,cAED,WACI,GAAI6H,EAAElC,OAAO,GAAK3F,KAAK2F,OAAO,EAC1B,MAAM,IAAIxF,MAAJ,wCAA4CH,KAAK2F,OAAjD,eAA+DkC,EAAElC,SAE3E,OAAO,IAAIkE,EAAI7J,KAAK,GAAIA,KAAK,GAChC,G,cAED,WACI,GAAI6H,EAAElC,OAAO,GAAK3F,KAAK2F,OAAO,EAC1B,MAAM,IAAIxF,MAAJ,wCAA4CH,KAAK2F,OAAjD,eAA+DkC,EAAElC,SAE3E,OAAO,IAAIkE,EAAI7J,KAAK,GAAIA,KAAK,GAChC,G,oBAED,WACI,IAAMwK,EAAI5D,KAAK6D,MAAe,IAATzK,KAAKwK,GACpBE,EAAI9D,KAAK6D,MAAe,IAATzK,KAAK0K,GACpBlB,EAAI5C,KAAK6D,MAAe,IAATzK,KAAKwJ,GACpBmB,EAAM,SAACC,GAAD,OAAWA,EAAMC,SAAS,IAAIC,aAA9B,EACZ,iBAAYH,EAAIH,IAAhB,OAAuBG,EAAID,IAA3B,OAAkCC,EAAInB,GACzC,G,oBAED,WAEC,G,uBAED,WACI,OAAOxJ,KAAK+K,MAAQ/K,KAAKgL,MAC5B,G,sBAED,WACI,OAAQhL,KAAK2F,QACb,KAAK,EACD,iBAAW3F,KAAK,GAAhB,aAAuBA,KAAK,GAA5B,KACJ,KAAK,EACD,iBAAWA,KAAK,GAAhB,aAAuBA,KAAK,GAA5B,aAAmCA,KAAK,GAAxC,KACJ,KAAK,EACD,iBAAWA,KAAK,GAAhB,aAAuBA,KAAK,GAA5B,aAAmCA,KAAK,GAAxC,aAA+CA,KAAK,GAApD,KAEP,I,iCAED,SAAwB2J,EAAGC,GACvBF,EAAiBC,EAAGC,EACvB,G,iBAED,SAAWD,EAAGC,GAEV,OADAF,EAAiBC,EAAGC,GACZD,EAAGhE,QACX,KAAK,EACD,OAAO,IAAIkE,EAAI,CACXF,EAAG,GAAGC,EAAG,GAAKD,EAAG,GAAKC,EAAG,GACzBD,EAAG,GAAGC,EAAG,GAAKD,EAAG,GAAKC,EAAG,KAEjC,KAAK,EACD,OAAO,IAAIC,EAAI,CACXF,EAAG,GAAGC,EAAG,GAAKD,EAAG,GAAKC,EAAG,GACzBD,EAAG,GAAGC,EAAG,GAAKD,EAAG,GAAKC,EAAG,GACzBD,EAAG,GAAGC,EAAG,GAAKD,EAAG,GAAKC,EAAG,KAEjC,KAAK,EACD,OAAO,IAAIC,EAAI,CACXF,EAAG,GAAGC,EAAG,GAAKD,EAAG,GAAKC,EAAG,GACzBD,EAAG,GAAGC,EAAG,GAAKD,EAAG,GAAKC,EAAG,GACzBD,EAAG,GAAGC,EAAG,GAAKD,EAAG,GAAKC,EAAG,GACzBD,EAAG,GAAGC,EAAG,GAAKD,EAAG,GAAKC,EAAG,KAEjC,QACI,MAAM,IAAIzJ,MAAJ,+BAAmCwJ,EAAGhE,SAEnD,G,iBAED,SAAWgE,EAAGC,GAEV,OADAF,EAAiBC,EAAGC,GACZD,EAAGhE,QACX,KAAK,EACD,OAAO,IAAIkE,EAAI,CACXF,EAAG,GAAGC,EAAG,GAAKD,EAAG,GAAKC,EAAG,GACzBD,EAAG,GAAGC,EAAG,GAAKD,EAAG,GAAKC,EAAG,KAEjC,KAAK,EACD,OAAO,IAAIC,EAAI,CACXF,EAAG,GAAGC,EAAG,GAAKD,EAAG,GAAKC,EAAG,GACzBD,EAAG,GAAGC,EAAG,GAAKD,EAAG,GAAKC,EAAG,GACzBD,EAAG,GAAGC,EAAG,GAAKD,EAAG,GAAKC,EAAG,KAEjC,KAAK,EACD,OAAO,IAAIC,EAAI,CACXF,EAAG,GAAGC,EAAG,GAAKD,EAAG,GAAKC,EAAG,GACzBD,EAAG,GAAGC,EAAG,GAAKD,EAAG,GAAKC,EAAG,GACzBD,EAAG,GAAGC,EAAG,GAAKD,EAAG,GAAKC,EAAG,GACzBD,EAAG,GAAGC,EAAG,GAAKD,EAAG,GAAKC,EAAG,KAEjC,QACI,MAAM,IAAIzJ,MAAJ,+BAAmCwJ,EAAGhE,SAEnD,G,iBAED,SAAWgE,EAAGC,GAEV,OADAF,EAAiBC,EAAGC,GACZD,EAAGhE,QACX,KAAK,EACD,OAAO,IAAIkE,EAAI,CACXF,EAAG,GAAKC,EAAG,GACXD,EAAG,GAAKC,EAAG,KAEnB,KAAK,EACD,OAAO,IAAIC,EAAI,CACXF,EAAG,GAAKC,EAAG,GACXD,EAAG,GAAKC,EAAG,GACXD,EAAG,GAAKC,EAAG,KAEnB,KAAK,EACD,OAAO,IAAIC,EAAI,CACXF,EAAG,GAAKC,EAAG,GACXD,EAAG,GAAKC,EAAG,GACXD,EAAG,GAAKC,EAAG,GACXD,EAAG,GAAKC,EAAG,KAEnB,QACI,MAAM,IAAIzJ,MAAJ,+BAAmCwJ,EAAGhE,SAEnD,G,iBAED,SAAWgE,EAAGC,GAEV,OADAF,EAAiBC,EAAGC,GACZD,EAAGhE,QACX,KAAK,EACD,OAAO,IAAIkE,EAAI,CACXF,EAAG,GAAKC,EAAG,GACXD,EAAG,GAAKC,EAAG,KAEnB,KAAK,EACD,OAAO,IAAIC,EAAI,CACXF,EAAG,GAAKC,EAAG,GACXD,EAAG,GAAKC,EAAG,GACXD,EAAG,GAAKC,EAAG,KAEnB,KAAK,EACD,OAAO,IAAIC,EAAI,CACXF,EAAG,GAAKC,EAAG,GACXD,EAAG,GAAKC,EAAG,GACXD,EAAG,GAAKC,EAAG,GACXD,EAAG,GAAKC,EAAG,KAEnB,QACI,MAAM,IAAIzJ,MAAJ,+BAAmCwJ,EAAGhE,SAEnD,G,uBAED,SAAiBkC,GACb,OAAQA,EAAElC,QACV,KAAK,EACD,OAAOiB,KAAKqE,KAAKpD,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAKA,EAAE,IAC5C,KAAK,EACD,OAAOjB,KAAKqE,KAAKpD,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAKA,EAAE,IAC1D,KAAK,EACD,OAAOjB,KAAKqE,KAAKpD,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAKA,EAAE,IACxE,QACI,MAAM,IAAI1H,MAAJ,+BAAmC0H,EAAElC,SAElD,G,sBAED,SAAgBgE,EAAGC,GAEf,OADAF,EAAiBC,EAAGC,GACbC,EAAIG,UAAUH,EAAIqB,IAAIvB,EAAGC,GACnC,G,iBAED,SAAWD,EAAGC,GAEV,OADAF,EAAiBC,EAAGC,GACZD,EAAGhE,QACX,KAAK,EACD,OAAOgE,EAAG,GAAKC,EAAG,GAAKD,EAAG,GAAKC,EAAG,GACtC,KAAK,EACD,OAAOD,EAAG,GAAKC,EAAG,GAAKD,EAAG,GAAKC,EAAG,GAAKD,EAAG,GAAKC,EAAG,GACtD,KAAK,EACD,OAAOD,EAAG,GAAKC,EAAG,GAAKD,EAAG,GAAKC,EAAG,GAAKD,EAAG,GAAKC,EAAG,GAAKD,EAAG,GAAKC,EAAG,GACtE,QACI,MAAM,IAAIzJ,MAAJ,+BAAmCwJ,EAAGhE,SAEnD,G,mBAED,SAAagE,EAAGC,GAEZ,OADAF,EAAiBC,EAAGC,GACZD,EAAGhE,QACX,KAAK,EACD,OAAOgE,EAAG,GAAKC,EAAG,GAAKD,EAAG,GAAKC,EAAG,GACtC,KAAK,EACD,OAAO,IAAIC,EAAI,CACXF,EAAG,GAAKC,EAAG,GAAKD,EAAG,GAAKC,EAAG,GAC3BD,EAAG,GAAKC,EAAG,GAAKD,EAAG,GAAKC,EAAG,GAC3BD,EAAG,GAAKC,EAAG,GAAKD,EAAG,GAAKC,EAAG,KAEnC,QACI,MAAM,IAAIzJ,MAAJ,iDAAqDwJ,EAAGhE,SAErE,G,wBAED,SAAkBkC,GACd,IAAMkC,EAAIF,EAAIG,UAAUnC,GACxB,OAAQA,EAAElC,QACV,KAAK,EACD,OAAO,IAAIkE,EAAI,CAAEhC,EAAE,GAAKkC,EAAGlC,EAAE,GAAKkC,IACtC,KAAK,EACD,OAAO,IAAIF,EAAI,CAAEhC,EAAE,GAAKkC,EAAGlC,EAAE,GAAKkC,EAAGlC,EAAE,GAAKkC,IAChD,KAAK,EACD,OAAO,IAAIF,EAAI,CAAEhC,EAAE,GAAKkC,EAAGlC,EAAE,GAAKkC,EAAGlC,EAAE,GAAKkC,EAAGlC,EAAE,GAAKkC,IAC1D,QACI,MAAM,IAAI5J,MAAJ,+BAAmC0H,EAAElC,SAElD,G,kBAED,SAAYkC,EAAEyC,GACV,OAAQzC,EAAElC,QACV,KAAK,EACD,OAAO,IAAIkE,EAAI,CAAEhC,EAAE,GAAKyC,EAAGzC,EAAE,GAAKyC,IACtC,KAAK,EACD,OAAO,IAAIT,EAAI,CAAEhC,EAAE,GAAKyC,EAAGzC,EAAE,GAAKyC,EAAGzC,EAAE,GAAKyC,IAChD,KAAK,EACD,OAAO,IAAIT,EAAI,CAAEhC,EAAE,GAAKyC,EAAGzC,EAAE,GAAKyC,EAAGzC,EAAE,GAAKyC,EAAGzC,EAAE,GAAKyC,IAC1D,QACI,MAAM,IAAInK,MAAJ,+BAAmC0H,EAAElC,SAElD,G,iBAED,SAAWkC,EAAEyC,GACT,OAAQzC,EAAElC,QACV,KAAK,EACD,OAAO,IAAIkE,EAAI,CAAEhC,EAAE,GAAKyC,EAAGzC,EAAE,GAAKyC,IACtC,KAAK,EACD,OAAO,IAAIT,EAAI,CAAEhC,EAAE,GAAKyC,EAAGzC,EAAE,GAAKyC,EAAGzC,EAAE,GAAKyC,IAChD,KAAK,EACD,OAAO,IAAIT,EAAI,CAAEhC,EAAE,GAAKyC,EAAGzC,EAAE,GAAKyC,EAAGzC,EAAE,GAAKyC,EAAGzC,EAAE,GAAKyC,IAC1D,QACI,MAAM,IAAInK,MAAJ,+BAAmC0H,EAAElC,SAElD,G,oBAED,SAAcgE,EAAGC,GACb,GAAID,EAAGhE,QAAUiE,EAAGjE,OAChB,OAAO,EAGP,OAAQgE,EAAGhE,QACX,KAAK,EACD,OAAQ2D,EAAOK,EAAG,GAAIC,EAAG,KACjBN,EAAOK,EAAG,GAAIC,EAAG,IAC7B,KAAK,EACD,OAAQN,EAAOK,EAAG,GAAIC,EAAG,KACjBN,EAAOK,EAAG,GAAIC,EAAG,KACjBN,EAAOK,EAAG,GAAIC,EAAG,IAC7B,KAAK,EACD,OAAQN,EAAOK,EAAG,GAAIC,EAAG,KACjBN,EAAOK,EAAG,GAAIC,EAAG,KACjBN,EAAOK,EAAG,GAAIC,EAAG,KACjBN,EAAOK,EAAG,GAAIC,EAAG,IAC7B,QACI,MAAM,IAAIzJ,MAAJ,+BAAmCwJ,EAAGhE,SAGvD,G,oBAED,SAAckC,GACV,OAAQA,EAAElC,QACV,KAAK,EACD,OAAO0D,EAAOxB,EAAE,KAAOwB,EAAOxB,EAAE,IACpC,KAAK,EACD,OAAOwB,EAAOxB,EAAE,KAAOwB,EAAOxB,EAAE,KAAOwB,EAAOxB,EAAE,IACpD,KAAK,EACD,OAAOwB,EAAOxB,EAAE,KAAOwB,EAAOxB,EAAE,KAAOwB,EAAOxB,EAAE,KAAOwB,EAAOxB,EAAE,IACpE,QACI,MAAM,IAAI1H,MAAJ,+BAAmC0H,EAAElC,SAElD,G,mBAED,SAAakC,GACT,OAAQA,EAAElC,QACV,KAAK,EACD,OAAOwF,MAAMtD,EAAE,KAAOsD,MAAMtD,EAAE,IAClC,KAAK,EACD,OAAOsD,MAAMtD,EAAE,KAAOsD,MAAMtD,EAAE,KAAOsD,MAAMtD,EAAE,IACjD,KAAK,EACD,OAAOsD,MAAMtD,EAAE,KAAOsD,MAAMtD,EAAE,KAAOsD,MAAMtD,EAAE,KAAOsD,MAAMtD,EAAE,IAChE,QACI,MAAM,IAAI1H,MAAJ,+BAAmC0H,EAAElC,SAElD,G,kBAGD,WACI,OAAO,IAAIkE,EAAI,EAAE,EACpB,G,kBAED,WACI,OAAO,IAAIA,EAAI,EAAE,EAAE,EACtB,G,kBAED,WACI,OAAO,IAAIA,EAAI,EAAE,EAAE,EAAE,EACxB,I,gCAhoBgBA,CAAYb,G,44BCHZoC,EAAAA,SAAAA,I,4oBACjB,aAAc,MACV,GADU,UACe,IAArBtB,UAAUnE,OACV,cAAMmE,gBAEL,GAAyB,IAArBA,UAAUnE,QAAwC,IAAxBmE,UAAU,GAAGnE,OAC5C,cAAMmE,UAAU,QAEf,IAAyB,IAArBA,UAAUnE,OAIf,MAAM,IAAIxF,MAAJ,8CAHN,cAAM,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAI1B,CAZS,WAab,C,oCAED,WAII,OAHAH,KAAK,GAAK,EAAGA,KAAK,GAAK,EAAGA,KAAK,GAAK,EACpCA,KAAK,GAAK,EAAGA,KAAK,GAAK,EAAGA,KAAK,GAAK,EACpCA,KAAK,GAAK,EAAGA,KAAK,GAAK,EAAGA,KAAK,GAAK,EAC7BA,IACV,G,kBAED,WAII,OAHAA,KAAK,GAAK,EAAGA,KAAK,GAAK,EAAGA,KAAK,GAAK,EACpCA,KAAK,GAAK,EAAGA,KAAK,GAAK,EAAGA,KAAK,GAAK,EACpCA,KAAK,GAAK,EAAGA,KAAK,GAAK,EAAGA,KAAK,GAAK,EAC7BA,IACV,G,iBAED,SAAI4H,GACA,OAAO,IAAIiC,EACP7J,KAAS,EAAJ4H,GACL5H,KAAS,EAAJ4H,EAAQ,GACb5H,KAAS,EAAH4H,EAAO,GACpB,G,oBAED,SAAOA,EAAG2B,GAAuB,IAApBY,EAAoB,uDAAhB,KAAMC,EAAU,uDAAN,KACvB,IAAIb,aAAA,EAAAA,EAAG5D,SAAQ,EACX3F,KAAS,EAAJ4H,GAAc2B,EAAE,GACrBvJ,KAAS,EAAJ4H,EAAQ,GAAM2B,EAAE,GACrBvJ,KAAS,EAAJ4H,EAAQ,GAAM2B,EAAE,OAEpB,IAAkB,iBAAPA,GACE,iBAAPY,GACO,iBAAPC,EAOP,MAAM,IAAIjK,MAAJ,wCALNH,KAAS,EAAJ4H,GAAc2B,EACnBvJ,KAAS,EAAJ4H,EAAQ,GAAMuC,EACnBnK,KAAS,EAAJ4H,EAAQ,GAAMwC,CAItB,CACD,OAAOpK,IACV,G,iBAED,SAAI4H,GACA,OAAO,IAAIiC,EACP7J,KAAK4H,GACL5H,KAAK4H,EAAI,GACT5H,KAAK4H,EAAI,GAEhB,G,oBAED,SAAOA,EAAG2B,GAAuB,IAApBY,EAAoB,uDAAhB,KAAMC,EAAU,uDAAN,KACvB,IAAIb,aAAA,EAAAA,EAAG5D,SAAQ,EACX3F,KAAK4H,GAAa2B,EAAE,GACpBvJ,KAAK4H,EAAI,GAAS2B,EAAE,GACpBvJ,KAAK4H,EAAI,GAAS2B,EAAE,OAEnB,IAAkB,iBAAPA,GACE,iBAAPY,GACO,iBAAPC,EAOP,MAAM,IAAIjK,MAAJ,wCALNH,KAAK4H,GAAa2B,EAClBvJ,KAAK4H,EAAI,GAASuC,EAClBnK,KAAK4H,EAAI,GAASwC,CAIrB,CACD,OAAOpK,IACV,G,oBAED,SAAO+J,GACH,GAAiB,IAAbA,EAAEpE,OACF3F,KAAK,GAAK+J,EAAE,GAAI/J,KAAK,GAAK+J,EAAE,GAAI/J,KAAK,GAAK+J,EAAE,GACrD/J,KAAK,GAAK+J,EAAE,GAAI/J,KAAK,GAAK+J,EAAE,GAAI/J,KAAK,GAAK+J,EAAE,GAC5C/J,KAAK,GAAK+J,EAAE,GAAI/J,KAAK,GAAK+J,EAAE,GAAI/J,KAAK,GAAK+J,EAAE,OAElC,IAAiB,KAAbA,EAAEpE,OAMP,MAAM,IAAIxF,MAAJ,0CALNH,KAAK,GAAK+J,EAAE,GAAI/J,KAAK,GAAK+J,EAAE,GAAI/J,KAAK,GAAK+J,EAAE,GACrD/J,KAAK,GAAK+J,EAAE,GAAI/J,KAAK,GAAK+J,EAAE,GAAI/J,KAAK,GAAK+J,EAAE,GAC5C/J,KAAK,GAAK+J,EAAE,GAAI/J,KAAK,GAAK+J,EAAE,GAAI/J,KAAK,GAAK+J,EAAE,GAItC,CACD,OAAO/J,IACV,G,sBAED,SAASkK,EAAEC,EAAEC,GACf,IAAMiB,EAAM,IAAIxB,EAAI7J,KAAK,GAAIA,KAAK,GAAIA,KAAK,IAAKsL,YAAYC,MAAMrB,GAC5DsB,EAAM,IAAI3B,EAAI7J,KAAK,GAAIA,KAAK,GAAIA,KAAK,IAAKsL,YAAYC,MAAMpB,GAC5DsB,EAAM,IAAI5B,EAAI7J,KAAK,GAAIA,KAAK,GAAIA,KAAK,IAAKsL,YAAYC,MAAMnB,GAIlE,OAHApK,KAAK,GAAKqL,EAAGnB,EAAGlK,KAAK,GAAKqL,EAAGlB,EAAGnK,KAAK,GAAKqL,EAAGjB,EAC7CpK,KAAK,GAAKwL,EAAGtB,EAAGlK,KAAK,GAAKwL,EAAGrB,EAAGnK,KAAK,GAAKwL,EAAGpB,EAC7CpK,KAAK,GAAKyL,EAAGvB,EAAGlK,KAAK,GAAKyL,EAAGtB,EAAGnK,KAAK,GAAKyL,EAAGrB,EACtCpK,IACP,G,sBAEE,WACI,IAAM0L,EAAK1L,KAAK,GACV2L,EAAK3L,KAAK,GACV4L,EAAK5L,KAAK,GAOhB,OANAA,KAAK,GAAKA,KAAK,GACfA,KAAK,GAAKA,KAAK,GACfA,KAAK,GAAKA,KAAK,GACfA,KAAK,GAAK0L,EACV1L,KAAK,GAAK4L,EACV5L,KAAK,GAAK2L,EACH3L,IACV,G,kBAED,SAAKuJ,GACD,GAAkB,iBAAPA,EACPvJ,KAAK,IAAMuJ,EAAGvJ,KAAK,IAAMuJ,EAAGvJ,KAAK,IAAMuJ,EACvCvJ,KAAK,IAAMuJ,EAAGvJ,KAAK,IAAMuJ,EAAGvJ,KAAK,IAAMuJ,EACvCvJ,KAAK,IAAMuJ,EAAGvJ,KAAK,IAAMuJ,EAAGvJ,KAAK,IAAMuJ,MAEtC,MAAIA,aAAaP,GAA6B,IAAbO,EAAE5D,QAapC,MAAM,IAAIxF,MAAJ,oCAZN,IAAM0L,EAAK7L,KAAK8L,IAAI,GACdC,EAAK/L,KAAK8L,IAAI,GACdE,EAAKhM,KAAK8L,IAAI,GACdG,EAAK1C,EAAE2C,IAAI,GACXC,EAAK5C,EAAE2C,IAAI,GACXE,EAAK7C,EAAE2C,IAAI,GAEjBlM,KAAK,GAAK6J,EAAIwC,IAAIR,EAAGI,GAAKjM,KAAK,GAAK6J,EAAIwC,IAAIR,EAAGM,GAAKnM,KAAK,GAAK6J,EAAIwC,IAAIR,EAAGO,GACzEpM,KAAK,GAAK6J,EAAIwC,IAAIN,EAAGE,GAAKjM,KAAK,GAAK6J,EAAIwC,IAAIN,EAAGI,GAAKnM,KAAK,GAAK6J,EAAIwC,IAAIN,EAAGK,GACzEpM,KAAK,GAAK6J,EAAIwC,IAAIL,EAAGC,GAAKjM,KAAK,GAAK6J,EAAIwC,IAAIL,EAAGG,GAAKnM,KAAK,GAAK6J,EAAIwC,IAAIL,EAAGI,EAI5E,CACD,OAAOpM,IACV,G,wBAED,SAAW6H,GACP,GAAiB,IAAbA,EAAElC,QAA6B,IAAbkC,EAAElC,OAAc,CAClC,IAAMuE,EAAIrC,EAAE,GACNsC,EAAItC,EAAE,GACNuC,EAAiB,IAAbvC,EAAElC,OAAe,EAAIkC,EAAE,GAEjC,OAAO,IAAIgC,EAAK7J,KAAK,GAAKkK,EAAIlK,KAAK,GAAKmK,EAAInK,KAAK,GAAKoK,EACtCpK,KAAK,GAAKkK,EAAIlK,KAAK,GAAKmK,EAAInK,KAAK,GAAKoK,EACtCpK,KAAK,GAAKkK,EAAIlK,KAAK,GAAKmK,EAAInK,KAAK,GAAKoK,EACzD,CAEG,MAAM,IAAIjK,MAAJ,yCAEb,G,sBAED,WACI,MAAQ,YAAKH,KAAK,GAAV,aAAiBA,KAAK,GAAtB,aAA6BA,KAAK,GAAlC,kBACKA,KAAK,GADV,aACiBA,KAAK,GADtB,aAC6BA,KAAK,GADlC,kBAEKA,KAAK,GAFV,aAEiBA,KAAK,GAFtB,aAE6BA,KAAK,GAFlC,KAGX,I,6BAED,WAEI,OADU,IAAIoL,GACLkB,UACZ,G,sBAED,WAEI,OADU,IAAIlB,GACLmB,MACZ,G,gCAED,SAA0BC,GACtB,IAAMzC,EAAIqB,EAAKqB,eAMf,OAJA1C,EAAE2C,OAAO,EAAG,IAAI7C,EAAK,EAAK,EAAI2C,EAAE,GAAKA,EAAE,GAAK,EAAIA,EAAE,GAAKA,EAAE,GAAI,EAAIA,EAAE,GAAKA,EAAE,GAAK,EAAIA,EAAE,GAAKA,EAAE,GAAI,EAAIA,EAAE,GAAKA,EAAE,GAAK,EAAIA,EAAE,GAAKA,EAAE,KAC/HzC,EAAE2C,OAAO,EAAG,IAAI7C,EAAK,EAAI2C,EAAE,GAAKA,EAAE,GAAK,EAAIA,EAAE,GAAKA,EAAE,GAAI,EAAK,EAAMA,EAAE,GAAKA,EAAE,GAAK,EAAIA,EAAE,GAAKA,EAAE,GAAI,EAAIA,EAAE,GAAKA,EAAE,GAAK,EAAIA,EAAE,GAAKA,EAAE,KACjIzC,EAAE2C,OAAO,EAAG,IAAI7C,EAAK,EAAI2C,EAAE,GAAKA,EAAE,GAAK,EAAIA,EAAE,GAAKA,EAAE,GAAI,EAAIA,EAAE,GAAKA,EAAE,GAAK,EAAIA,EAAE,GAAKA,EAAE,GAAK,EAAI,EAAIA,EAAE,GAAKA,EAAE,GAAK,EAAIA,EAAE,GAAKA,EAAE,KAExHzC,CACV,G,oBAED,SAAcA,GACV,OAAOV,EAAOxB,EAAE,KAAOwB,EAAOxB,EAAE,KAAOwB,EAAOxB,EAAE,KACxCwB,EAAOxB,EAAE,KAAOwB,EAAOxB,EAAE,KAAOwB,EAAOxB,EAAE,KACzCwB,EAAOxB,EAAE,KAAOwB,EAAOxB,EAAE,KAAOwB,EAAOxB,EAAE,GACpD,G,wBAED,SAAkBkC,GACd,OAAOT,EAAOzB,EAAE,GAAI,IAAMwB,EAAOxB,EAAE,KAAOwB,EAAOxB,EAAE,KAC3CwB,EAAOxB,EAAE,KAAOyB,EAAOzB,EAAE,GAAI,IAAMwB,EAAOxB,EAAE,KAC5CwB,EAAOxB,EAAE,KAAOwB,EAAOxB,EAAE,KAAOyB,EAAOzB,EAAE,GAAI,EACxD,G,sBAED,SAAgBkC,GACZ,OAAO,IAAIF,EACPA,EAAIG,UAAU,IAAIH,EAAIE,EAAE,GAAIA,EAAE,GAAIA,EAAE,KACpCF,EAAIG,UAAU,IAAIH,EAAIE,EAAE,GAAIA,EAAE,GAAIA,EAAE,KACpCF,EAAIG,UAAU,IAAIH,EAAIE,EAAE,GAAIA,EAAE,GAAIA,EAAE,KAE3C,G,oBAED,SAAcR,EAAEC,GACZ,OAAOF,EAAOC,EAAE,GAAIC,EAAE,KAAOF,EAAOC,EAAE,GAAIC,EAAE,KAAQF,EAAOC,EAAE,GAAIC,EAAE,KAC3DF,EAAOC,EAAE,GAAIC,EAAE,KAAOF,EAAOC,EAAE,GAAIC,EAAE,KAAQF,EAAOC,EAAE,GAAIC,EAAE,KAC5DF,EAAOC,EAAE,GAAIC,EAAE,KAAOF,EAAOC,EAAE,GAAIC,EAAE,KAAQF,EAAOC,EAAE,GAAIC,EAAE,GACvE,G,mBAED,SAAaO,GACT,OAAOoB,MAAMpB,EAAE,KAAOoB,MAAMpB,EAAE,KAAOoB,MAAMpB,EAAE,KACrCoB,MAAMpB,EAAE,KAAOoB,MAAMpB,EAAE,KAAOoB,MAAMpB,EAAE,KACtCoB,MAAMpB,EAAE,KAAOoB,MAAMpB,EAAE,KAAOoB,MAAMpB,EAAE,GACjD,I,gCA5NgBqB,CAAapC,G,44BCCb2D,EAAAA,SAAAA,I,4oBACjB,aAAc,UACV,IAAMC,EAAW,CACb,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,GAIb,GAAyB,IAArB9C,UAAUnE,OACViH,EAAS,GAAK9C,UAAU,GACxB8C,EAAS,GAAK9C,UAAU,GACxB8C,EAAS,GAAK9C,UAAU,GAExB8C,EAAS,GAAK9C,UAAU,GACxB8C,EAAS,GAAK9C,UAAU,GACxB8C,EAAS,GAAK9C,UAAU,GAExB8C,EAAS,GAAK9C,UAAU,GACxB8C,EAAS,GAAK9C,UAAU,GACxB8C,EAAS,IAAM9C,UAAU,GAEzB8C,EAAS,IAAM,OAEd,GAAyB,IAArB9C,UAAUnE,QAAwC,IAAxBmE,UAAU,GAAGnE,OAC5CiH,EAAS,GAAM9C,UAAU,GAAG,GAC5B8C,EAAS,GAAM9C,UAAU,GAAG,GAC5B8C,EAAS,GAAM9C,UAAU,GAAG,GAE5B8C,EAAS,GAAM9C,UAAU,GAAG,GAC5B8C,EAAS,GAAM9C,UAAU,GAAG,GAC5B8C,EAAS,GAAM9C,UAAU,GAAG,GAE5B8C,EAAS,GAAM9C,UAAU,GAAG,GAC5B8C,EAAS,GAAM9C,UAAU,GAAG,GAC5B8C,EAAS,IAAM9C,UAAU,GAAG,GAE5B8C,EAAS,IAAM,OAGd,GAAyB,KAArB9C,UAAUnE,OACfiH,EAAS,GAAM9C,UAAU,GACzB8C,EAAS,GAAM9C,UAAU,GACzB8C,EAAS,GAAM9C,UAAU,GACzB8C,EAAS,GAAM9C,UAAU,GAEzB8C,EAAS,GAAM9C,UAAU,GACzB8C,EAAS,GAAM9C,UAAU,GACzB8C,EAAS,GAAM9C,UAAU,GACzB8C,EAAS,GAAM9C,UAAU,GAEzB8C,EAAS,GAAM9C,UAAU,GACzB8C,EAAS,GAAM9C,UAAU,GACzB8C,EAAS,IAAM9C,UAAU,IACzB8C,EAAS,IAAM9C,UAAU,IAEzB8C,EAAS,IAAM9C,UAAU,IACzB8C,EAAS,IAAM9C,UAAU,IACzB8C,EAAS,IAAM9C,UAAU,IACzB8C,EAAS,IAAM9C,UAAU,SAExB,GAAyB,IAArBA,UAAUnE,QAAwC,KAAxBmE,UAAU,GAAGnE,OAC5CiH,EAAS,GAAM9C,UAAU,GAAG,GAC5B8C,EAAS,GAAM9C,UAAU,GAAG,GAC5B8C,EAAS,GAAM9C,UAAU,GAAG,GAC5B8C,EAAS,GAAM9C,UAAU,GAAG,GAE5B8C,EAAS,GAAM9C,UAAU,GAAG,GAC5B8C,EAAS,GAAM9C,UAAU,GAAG,GAC5B8C,EAAS,GAAM9C,UAAU,GAAG,GAC5B8C,EAAS,GAAM9C,UAAU,GAAG,GAE5B8C,EAAS,GAAM9C,UAAU,GAAG,GAC5B8C,EAAS,GAAM9C,UAAU,GAAG,GAC5B8C,EAAS,IAAM9C,UAAU,GAAG,IAC5B8C,EAAS,IAAM9C,UAAU,GAAG,IAE5B8C,EAAS,IAAM9C,UAAU,GAAG,IAC5B8C,EAAS,IAAM9C,UAAU,GAAG,IAC5B8C,EAAS,IAAM9C,UAAU,GAAG,IAC5B8C,EAAS,IAAM9C,UAAU,GAAG,SAE3B,GAAwB,GAApBA,UAAUnE,OACf,MAAM,IAAIxF,MAAJ,iDAnFA,mBAsFJyM,EACT,C,oCAGD,WAKI,OAJA5M,KAAK,GAAM,EAAGA,KAAK,GAAM,EAAGA,KAAK,GAAM,EAAGA,KAAK,GAAM,EACrDA,KAAK,GAAM,EAAGA,KAAK,GAAM,EAAGA,KAAK,GAAM,EAAGA,KAAK,GAAM,EACrDA,KAAK,GAAM,EAAGA,KAAK,GAAM,EAAGA,KAAK,IAAM,EAAGA,KAAK,IAAM,EACrDA,KAAK,IAAM,EAAGA,KAAK,IAAM,EAAGA,KAAK,IAAM,EAAGA,KAAK,IAAM,EAC9CA,IACV,G,kBAED,WAKI,OAJAA,KAAM,GAAK,EAAGA,KAAM,GAAK,EAAGA,KAAM,GAAK,EAAGA,KAAM,GAAK,EACrDA,KAAM,GAAK,EAAGA,KAAM,GAAK,EAAGA,KAAM,GAAK,EAAGA,KAAM,GAAK,EACrDA,KAAM,GAAK,EAAGA,KAAM,GAAK,EAAGA,KAAK,IAAM,EAAGA,KAAK,IAAM,EACrDA,KAAK,IAAM,EAAGA,KAAK,IAAM,EAAGA,KAAK,IAAM,EAAGA,KAAK,IAAM,EAC9CA,IACV,G,yBAED,SAAY6M,EAAMC,EAAQC,EAAWC,GACjC,IAAIC,EAAQrG,KAAKsG,IJ3FP,kBI2FWL,EAAY,KAASE,EACtCI,EAAcF,EAAQH,EAE1B,OADA9M,KAAKoN,SAASD,EAAYA,GAAaF,EAAMA,EAAMF,EAAUC,GACtDhN,IACV,G,qBAED,SAAQqN,EAAMC,EAAOC,EAAQC,EAAKT,EAAWC,GACzC,IAAIS,EAAIH,EAAQD,EACZK,EAAIF,EAAID,EACRI,EAAIX,EAASD,EAOjB,OALA/M,KAAK0M,OAAO,EAAG,IAAI7C,EAAc,EAAVkD,EAAcU,EAAG,EAAK,EAAK,IAClDzN,KAAK0M,OAAO,EAAG,IAAI7C,EAAI,EAAe,EAAVkD,EAAcW,EAAG,EAAK,IAClD1N,KAAK0M,OAAO,EAAG,IAAI7C,GAAKyD,EAAMD,GAAMI,GAAID,EAAID,GAAQG,IAAKV,EAASD,GAAWY,GAAI,IACjF3N,KAAK0M,OAAO,EAAG,IAAI7C,EAAI,EAAK,GAAOmD,EAASD,EAAU,EAAKY,EAAG,IAEvD3N,IACV,G,mBAED,SAAMqN,EAAMC,EAAOC,EAAQC,EAAKT,EAAWC,GACvC,IAAIjD,EAAIuD,EAAMD,EACVO,EAAIJ,EAAID,EACRM,EAAIb,EAASD,EAOjB,OALA/M,KAAK,GAAK,EAAE+J,EAAG/J,KAAK,GAAK,EAAKA,KAAK,GAAK,EAAOA,KAAK,GAAK,EACzDA,KAAK,GAAK,EAAKA,KAAK,GAAK,EAAE4N,EAAG5N,KAAK,GAAK,EAAOA,KAAK,GAAK,EACzDA,KAAK,GAAK,EAAKA,KAAK,GAAK,EAAKA,KAAK,KAAO,EAAE6N,EAAG7N,KAAK,IAAK,EACzDA,KAAK,MAAMqN,EAAKC,GAAOvD,EAAG/J,KAAK,MAAQwN,EAAID,GAAQK,EAAG5N,KAAK,MAAQgN,EAASD,GAAWc,EAAG7N,KAAK,IAAI,EAE5FA,IACV,G,oBAED,SAAO8N,EAAOC,EAAUC,GACpBhO,KAAKsM,WAEL,IAAMnC,EAAI,IAAIN,EAAImE,GACZ5D,EAAIP,EAAIqB,IAAI4C,EAAMC,GACxB3D,EAAEkB,YACF,IAAMpB,EAAIL,EAAIoE,MAAM9D,EAAEC,GAqBtB,OApBAF,EAAEoB,YACFnB,EAAEmB,YAEFtL,KAAKkO,IAAMhE,EAAEA,EACblK,KAAKmO,IAAMjE,EAAEC,EACbnK,KAAKoO,IAAMlE,EAAEE,EACbpK,KAAKqO,KAAOxE,EAAIwC,IAAInC,EAAG4D,GACvB9N,KAAKsO,IAAMnE,EAAED,EACblK,KAAKuO,IAAMpE,EAAEA,EACbnK,KAAKwO,IAAMrE,EAAEC,EACbpK,KAAKyO,KAAO5E,EAAIwC,IAAIlC,EAAG2D,GACvB9N,KAAK0O,IAAMtE,EAAEF,EACblK,KAAK2O,IAAMvE,EAAED,EACbnK,KAAK4O,IAAMxE,EAAEA,EACbpK,KAAK6O,KAAOhF,EAAIwC,IAAIjC,EAAG0D,GACvB9N,KAAK8O,IAAM,EACX9O,KAAK+O,IAAM,EACX/O,KAAKgP,IAAM,EACXhP,KAAKiP,IAAM,EAEJjP,IACV,G,eAMD,WAAY,OAAOA,KAAK,EAAK,E,IAiB7B,SAAQ6H,GAAK7H,KAAK,GAAK6H,CAAI,G,eAhB3B,WAAY,OAAO7H,KAAK,EAAK,E,IAiB7B,SAAQ6H,GAAK7H,KAAK,GAAK6H,CAAI,G,eAhB3B,WAAY,OAAO7H,KAAK,EAAK,E,IAiB7B,SAAQ6H,GAAK7H,KAAK,GAAK6H,CAAI,G,eAhB3B,WAAY,OAAO7H,KAAK,EAAK,E,IAiB7B,SAAQ6H,GAAK7H,KAAK,GAAK6H,CAAI,G,eAhB3B,WAAY,OAAO7H,KAAK,EAAK,E,IAiB7B,SAAQ6H,GAAK7H,KAAK,GAAK6H,CAAI,G,eAhB3B,WAAY,OAAO7H,KAAK,EAAK,E,IAiB7B,SAAQ6H,GAAK7H,KAAK,GAAK6H,CAAI,G,eAhB3B,WAAY,OAAO7H,KAAK,EAAK,E,IAiB7B,SAAQ6H,GAAK7H,KAAK,GAAK6H,CAAI,G,eAhB3B,WAAY,OAAO7H,KAAK,EAAK,E,IAiB7B,SAAQ6H,GAAK7H,KAAK,GAAK6H,CAAI,G,eAhB3B,WAAY,OAAO7H,KAAK,EAAK,E,IAiB7B,SAAQ6H,GAAK7H,KAAK,GAAK6H,CAAI,G,eAhB3B,WAAY,OAAO7H,KAAK,EAAK,E,IAiB7B,SAAQ6H,GAAK7H,KAAK,GAAK6H,CAAI,G,eAhB3B,WAAY,OAAO7H,KAAK,GAAM,E,IAiB9B,SAAQ6H,GAAK7H,KAAK,IAAM6H,CAAI,G,eAhB5B,WAAY,OAAO7H,KAAK,GAAM,E,IAiB9B,SAAQ6H,GAAK7H,KAAK,IAAM6H,CAAI,G,eAhB5B,WAAY,OAAO7H,KAAK,GAAM,E,IAiB9B,SAAQ6H,GAAK7H,KAAK,IAAM6H,CAAI,G,eAhB5B,WAAY,OAAO7H,KAAK,GAAM,E,IAiB9B,SAAQ6H,GAAK7H,KAAK,IAAM6H,CAAI,G,eAhB5B,WAAY,OAAO7H,KAAK,GAAM,E,IAiB9B,SAAQ6H,GAAK7H,KAAK,IAAM6H,CAAI,G,eAhB5B,WAAY,OAAO7H,KAAK,GAAM,E,IAiB9B,SAAQ6H,GAAK7H,KAAK,IAAM6H,CAAI,G,gBAE5B,WACI,OAAO,IAAIuD,EAAKpL,KAAK,GAAIA,KAAK,GAAIA,KAAM,GACxBA,KAAK,GAAIA,KAAK,GAAIA,KAAM,GACxBA,KAAK,GAAIA,KAAK,GAAIA,KAAK,IAC1C,G,yBAED,WACI,OAAO2M,EAAKuC,mBAAmBlP,KAAM,IAAI6J,EAAI,EAAK,EAAK,GAC1D,G,uBAED,WACI,OAAO8C,EAAKuC,mBAAmBlP,KAAM,IAAI6J,EAAI,EAAK,EAAK,GAC1D,G,oBAED,WACI,OAAO8C,EAAKuC,mBAAmBlP,KAAM,IAAI6J,EAAI,EAAK,EAAK,GAC1D,G,0BAED,WACI,OAAO8C,EAAKuC,mBAAmBlP,KAAM,IAAI6J,EAAI,EAAK,GAAM,GAC3D,G,sBAED,WACI,OAAO8C,EAAKuC,mBAAmBlP,KAAM,IAAI6J,GAAK,EAAK,EAAK,GAC3D,G,sBAED,WACI,OAAO8C,EAAKuC,mBAAmBlP,KAAM,IAAI6J,EAAI,GAAM,EAAK,GAC3D,G,iBAED,SAAIjC,GACA,OAAO,IAAIiC,EACP7J,KAAS,EAAJ4H,GACL5H,KAAS,EAAJ4H,EAAQ,GACb5H,KAAS,EAAJ4H,EAAQ,GACb5H,KAAS,EAAJ4H,EAAQ,GACpB,G,oBAED,SAAOA,EAAG2B,GAAiC,IAA9BY,EAA8B,uDAA1B,KAAMC,EAAoB,uDAAhB,KAAMC,EAAU,uDAAN,KACjC,GAAId,EAAE5D,QAAQ,EACV3F,KAAS,EAAJ4H,GAAc2B,EAAE,GACrBvJ,KAAS,EAAJ4H,EAAQ,GAAM2B,EAAE,GACrBvJ,KAAS,EAAJ4H,EAAQ,GAAM2B,EAAE,GACrBvJ,KAAS,EAAJ4H,EAAQ,GAAM2B,EAAE,OAEpB,IAAkB,iBAAPA,GACE,iBAAPY,GACO,iBAAPC,GACO,iBAAPC,EAQP,MAAM,IAAIlK,MAAJ,wCANNH,KAAS,EAAJ4H,GAAc2B,EACnBvJ,KAAS,EAAJ4H,EAAQ,GAAMuC,EACnBnK,KAAS,EAAJ4H,EAAQ,GAAMwC,EACnBpK,KAAS,EAAJ4H,EAAQ,GAAMyC,CAItB,CACD,OAAOrK,IACV,G,iBAED,SAAI4H,GACA,OAAO,IAAIiC,EACP7J,KAAK4H,GACL5H,KAAK4H,EAAI,GACT5H,KAAK4H,EAAI,GACT5H,KAAK4H,EAAI,IAEhB,G,oBAED,SAAOA,EAAG2B,GAAiC,IAA9BY,EAA8B,uDAA1B,KAAMC,EAAoB,uDAAhB,KAAMC,EAAU,uDAAN,KACjC,GAAId,EAAE5D,QAAQ,EACV3F,KAAK4H,GAAa2B,EAAE,GACpBvJ,KAAK4H,EAAI,GAAS2B,EAAE,GACpBvJ,KAAK4H,EAAI,GAAS2B,EAAE,GACpBvJ,KAAK4H,EAAI,IAAS2B,EAAE,OAEnB,IAAkB,iBAAPA,GACE,iBAAPY,GACO,iBAAPC,GACO,iBAAPC,EAQP,MAAM,IAAIlK,MAAJ,wCANNH,KAAK4H,GAAa2B,EAClBvJ,KAAK4H,EAAI,GAASuC,EAClBnK,KAAK4H,EAAI,GAASwC,EAClBpK,KAAK4H,EAAI,IAASyC,CAIrB,CACD,OAAOrK,IACV,G,oBAED,SAAOuJ,GAaH,OAZc,GAAVA,EAAE5D,QACF3F,KAAK,GAAMuJ,EAAE,GAAIvJ,KAAK,GAAMuJ,EAAE,GAAIvJ,KAAK,GAAMuJ,EAAE,GAAIvJ,KAAK,GAAM,EAC9DA,KAAK,GAAMuJ,EAAE,GAAIvJ,KAAK,GAAMuJ,EAAE,GAAIvJ,KAAK,GAAMuJ,EAAE,GAAIvJ,KAAK,GAAM,EAC9DA,KAAK,GAAMuJ,EAAE,GAAIvJ,KAAK,GAAMuJ,EAAE,GAAIvJ,KAAK,IAAMuJ,EAAE,GAAIvJ,KAAK,IAAM,EAC9DA,KAAK,IAAM,EAAIA,KAAK,IAAM,EAAKA,KAAK,IAAM,EAAMA,KAAK,IAAM,GAE5C,IAAVuJ,EAAE5D,SACP3F,KAAK,GAAMuJ,EAAE,GAAKvJ,KAAK,GAAMuJ,EAAE,GAAKvJ,KAAK,GAAMuJ,EAAE,GAAKvJ,KAAK,GAAMuJ,EAAE,GACnEvJ,KAAK,GAAMuJ,EAAE,GAAKvJ,KAAK,GAAMuJ,EAAE,GAAKvJ,KAAK,GAAMuJ,EAAE,GAAKvJ,KAAK,GAAMuJ,EAAE,GACnEvJ,KAAK,GAAMuJ,EAAE,GAAKvJ,KAAK,GAAMuJ,EAAE,GAAKvJ,KAAK,IAAMuJ,EAAE,IAAKvJ,KAAK,IAAMuJ,EAAE,IACnEvJ,KAAK,IAAMuJ,EAAE,IAAKvJ,KAAK,IAAMuJ,EAAE,IAAKvJ,KAAK,IAAMuJ,EAAE,IAAKvJ,KAAK,IAAMuJ,EAAE,KAEhEvJ,IACV,G,uBAED,SAAUkK,EAAGC,EAAGC,GAEZ,OADApK,KAAKmP,KAAKxC,EAAKyC,gBAAgBlF,EAAGC,EAAGC,IAC9BpK,IACV,G,oBAED,SAAOqP,EAAOnF,EAAGC,EAAGC,GAEhB,OADApK,KAAKmP,KAAKxC,EAAK2C,aAAaD,EAAOnF,EAAGC,EAAGC,IAClCpK,IACV,G,mBAED,SAAMkK,EAAGC,EAAGC,GAER,OADApK,KAAKmP,KAAKxC,EAAK4C,UAAUrF,EAAGC,EAAGC,IACxBpK,IACV,G,sBAED,WACI,MAAQ,YAAKA,KAAM,GAAX,aAAkBA,KAAM,GAAxB,aAA+BA,KAAM,GAArC,aAA4CA,KAAM,GAAlD,kBACKA,KAAM,GADX,aACkBA,KAAM,GADxB,aAC+BA,KAAM,GADrC,aAC4CA,KAAM,GADlD,kBAEKA,KAAM,GAFX,aAEkBA,KAAM,GAFxB,aAE+BA,KAAK,IAFpC,aAE4CA,KAAK,IAFjD,kBAGKA,KAAK,IAHV,aAGkBA,KAAK,IAHvB,aAG+BA,KAAK,IAHpC,aAG4CA,KAAK,IAHjD,KAIX,G,sBAED,SAASkK,EAAEC,EAAEC,GACT,IAAMiB,EAAK,IAAIxB,EAAI7J,KAAK,GAAIA,KAAK,GAAIA,KAAK,IAAIsL,YAAYC,MAAMrB,GAC1DsB,EAAK,IAAI3B,EAAI7J,KAAK,GAAIA,KAAK,GAAIA,KAAK,IAAIsL,YAAYC,MAAMpB,GAC1DsB,EAAK,IAAI5B,EAAI7J,KAAK,GAAIA,KAAK,GAAIA,KAAK,KAAKsL,YAAYC,MAAMnB,GAIjE,OAHApK,KAAK,GAAKqL,EAAGnB,EAAGlK,KAAK,GAAKqL,EAAGlB,EAAGnK,KAAK,GAAKqL,EAAGjB,EAC7CpK,KAAK,GAAKwL,EAAGtB,EAAGlK,KAAK,GAAKwL,EAAGrB,EAAGnK,KAAK,GAAKwL,EAAGpB,EAC7CpK,KAAK,GAAKyL,EAAGvB,EAAGlK,KAAK,GAAKyL,EAAGtB,EAAGnK,KAAK,IAAMyL,EAAGrB,EACvCpK,IACV,G,yBAED,SAAYwP,EAAIrF,EAAEC,GAWd,MAViB,iBAANoF,GACPxP,KAAK,IAAMwP,EACXxP,KAAK,IAAMmK,EACXnK,KAAK,IAAMoK,IAGXpK,KAAK,IAAMwP,EAAItF,EACflK,KAAK,IAAMwP,EAAIrF,EACfnK,KAAK,IAAMwP,EAAIpF,GAEZpK,IACV,G,kBAED,SAAKuJ,GACD,GAAe,iBAAJA,EAKP,OAJAvJ,KAAM,IAAMuJ,EAAGvJ,KAAM,IAAMuJ,EAAGvJ,KAAM,IAAMuJ,EAAGvJ,KAAM,IAAMuJ,EACzDvJ,KAAM,IAAMuJ,EAAGvJ,KAAM,IAAMuJ,EAAGvJ,KAAM,IAAMuJ,EAAGvJ,KAAM,IAAMuJ,EACzDvJ,KAAM,IAAMuJ,EAAGvJ,KAAM,IAAMuJ,EAAGvJ,KAAK,KAAOuJ,EAAGvJ,KAAK,KAAOuJ,EACzDvJ,KAAK,KAAOuJ,EAAGvJ,KAAK,KAAOuJ,EAAGvJ,KAAK,KAAOuJ,EAAGvJ,KAAK,KAAOuJ,EAClDvJ,KAGX,IAAM6L,EAAK7L,KAAK8L,IAAI,GACdC,EAAK/L,KAAK8L,IAAI,GACdE,EAAKhM,KAAK8L,IAAI,GACd2D,EAAKzP,KAAK8L,IAAI,GACdG,EAAK1C,EAAE2C,IAAI,GACXC,EAAK5C,EAAE2C,IAAI,GACXE,EAAK7C,EAAE2C,IAAI,GACXwD,EAAKnG,EAAE2C,IAAI,GAOjB,OALAlM,KAAK,GAAM6J,EAAIwC,IAAIR,EAAII,GAAKjM,KAAK,GAAM6J,EAAIwC,IAAIR,EAAIM,GAAKnM,KAAK,GAAM6J,EAAIwC,IAAIR,EAAIO,GAAKpM,KAAK,GAAM6J,EAAIwC,IAAIR,EAAI6D,GAC3G1P,KAAK,GAAM6J,EAAIwC,IAAIN,EAAIE,GAAKjM,KAAK,GAAM6J,EAAIwC,IAAIN,EAAII,GAAKnM,KAAK,GAAM6J,EAAIwC,IAAIN,EAAIK,GAAKpM,KAAK,GAAM6J,EAAIwC,IAAIN,EAAI2D,GAC3G1P,KAAK,GAAM6J,EAAIwC,IAAIL,EAAIC,GAAKjM,KAAK,GAAM6J,EAAIwC,IAAIL,EAAIG,GAAKnM,KAAK,IAAM6J,EAAIwC,IAAIL,EAAII,GAAKpM,KAAK,IAAM6J,EAAIwC,IAAIL,EAAI0D,GAC3G1P,KAAK,IAAM6J,EAAIwC,IAAIoD,EAAIxD,GAAKjM,KAAK,IAAM6J,EAAIwC,IAAIoD,EAAItD,GAAKnM,KAAK,IAAM6J,EAAIwC,IAAIoD,EAAIrD,GAAKpM,KAAK,IAAM6J,EAAIwC,IAAIoD,EAAIC,GAEpG1P,IACV,G,wBAED,SAAW2P,GACP,GAAIA,EAAIhK,OAAO,EACX,MAAM,IAAIxF,MAAM,gDAGpB,IAAM+J,EAAIyF,EAAI,GACRxF,EAAIwF,EAAI,GACRvF,EAAIuF,EAAI,GACRtF,EAAIsF,EAAIhK,OAAQ,EAAIgK,EAAI,GAAK,EAEnC,OAAO,IAAI9F,EAAK7J,KAAK,GAAKkK,EAAIlK,KAAK,GAAKmK,EAAInK,KAAM,GAAKoK,EAAIpK,KAAK,IAAMqK,EACtDrK,KAAK,GAAKkK,EAAIlK,KAAK,GAAKmK,EAAInK,KAAM,GAAKoK,EAAIpK,KAAK,IAAMqK,EACtDrK,KAAK,GAAKkK,EAAIlK,KAAK,GAAKmK,EAAInK,KAAK,IAAMoK,EAAIpK,KAAK,IAAMqK,EACtDrK,KAAK,GAAKkK,EAAIlK,KAAK,GAAKmK,EAAInK,KAAK,IAAMoK,EAAIpK,KAAK,IAAMqK,EACzE,G,oBAED,WACI,IAAMuF,EAAM5P,KAAK,GAAK6P,EAAM7P,KAAK,GAAK8P,EAAM9P,KAAK,GAAK+P,EAAM/P,KAAK,GACzDgQ,EAAMhQ,KAAK,GAAKiQ,EAAMjQ,KAAK,GAAKkQ,EAAMlQ,KAAK,GAAKmQ,EAAMnQ,KAAK,GAC3DoQ,EAAMpQ,KAAK,GAAKqQ,EAAMrQ,KAAK,GAAKsQ,EAAMtQ,KAAK,IAAKuQ,EAAMvQ,KAAK,IAC3DwQ,EAAMxQ,KAAK,IAAKyQ,EAAMzQ,KAAK,IAAK0Q,EAAM1Q,KAAK,IAAK2Q,EAAM3Q,KAAK,IAE7D4Q,EAAMhB,EAAMK,EAAMJ,EAAMG,EACtBa,EAAMjB,EAAMM,EAAMJ,EAAME,EACxBc,EAAMlB,EAAMO,EAAMJ,EAAMC,EACxBe,EAAMlB,EAAMK,EAAMJ,EAAMG,EACxBe,EAAMnB,EAAMM,EAAMJ,EAAME,EACxBgB,EAAMnB,EAAMK,EAAMJ,EAAMG,EACxBgB,EAAMd,EAAMK,EAAMJ,EAAMG,EACxBW,EAAMf,EAAMM,EAAMJ,EAAME,EACxBY,EAAMhB,EAAMO,EAAMJ,EAAMC,EACxBa,EAAMhB,EAAMK,EAAMJ,EAAMG,EACxBa,EAAMjB,EAAMM,EAAMJ,EAAME,EACxBc,EAAMjB,EAAMK,EAAMJ,EAAMG,EAE5Bc,EAAMZ,EAAMW,EAAMV,EAAMS,EAAMR,EAAMO,EAAMN,EAAMK,EAAMJ,EAAMG,EAAMF,EAAMC,EA0B5E,OAxBKM,GAIDA,EAAM,EAAMA,EAEZxR,KAAK,IAAMiQ,EAAMsB,EAAMrB,EAAMoB,EAAMnB,EAAMkB,GAAOG,EAChDxR,KAAK,IAAM8P,EAAMwB,EAAMzB,EAAM0B,EAAMxB,EAAMsB,GAAOG,EAChDxR,KAAK,IAAMyQ,EAAMQ,EAAMP,EAAMM,EAAML,EAAMI,GAAOS,EAChDxR,KAAK,IAAMsQ,EAAMU,EAAMX,EAAMY,EAAMV,EAAMQ,GAAOS,EAChDxR,KAAK,IAAMkQ,EAAMkB,EAAMpB,EAAMuB,EAAMpB,EAAMgB,GAAOK,EAChDxR,KAAK,IAAM4P,EAAM2B,EAAMzB,EAAMsB,EAAMrB,EAAMoB,GAAOK,EAChDxR,KAAK,IAAM0Q,EAAMI,EAAMN,EAAMS,EAAMN,EAAME,GAAOW,EAChDxR,KAAK,IAAMoQ,EAAMa,EAAMX,EAAMQ,EAAMP,EAAMM,GAAOW,EAChDxR,KAAK,IAAMgQ,EAAMsB,EAAMrB,EAAMmB,EAAMjB,EAAMe,GAAOM,EAChDxR,KAAK,IAAM6P,EAAMuB,EAAMxB,EAAM0B,EAAMvB,EAAMmB,GAAOM,EAChDxR,KAAK,KAAOwQ,EAAMQ,EAAMP,EAAMK,EAAMH,EAAMC,GAAOY,EACjDxR,KAAK,KAAOqQ,EAAMS,EAAMV,EAAMY,EAAMT,EAAMK,GAAOY,EACjDxR,KAAK,KAAOiQ,EAAMkB,EAAMnB,EAAMqB,EAAMnB,EAAMgB,GAAOM,EACjDxR,KAAK,KAAO4P,EAAMyB,EAAMxB,EAAMsB,EAAMrB,EAAMoB,GAAOM,EACjDxR,KAAK,KAAOyQ,EAAMI,EAAML,EAAMO,EAAML,EAAME,GAAOY,EACjDxR,KAAK,KAAOoQ,EAAMW,EAAMV,EAAMQ,EAAMP,EAAMM,GAAOY,GApBjDxR,KAAKuM,OAuBFvM,IACV,G,sBAED,WACI,IAAM6L,EAAK,IAAIhC,EAAI7J,KAAK,GAAIA,KAAK,GAAIA,KAAM,GAAIA,KAAK,KAC9C+L,EAAK,IAAIlC,EAAI7J,KAAK,GAAIA,KAAK,GAAIA,KAAM,GAAIA,KAAK,KAC9CgM,EAAK,IAAInC,EAAI7J,KAAK,GAAIA,KAAK,GAAIA,KAAK,IAAKA,KAAK,KAC9CyP,EAAK,IAAI5F,EAAI7J,KAAK,GAAIA,KAAK,GAAIA,KAAK,IAAKA,KAAK,KAMpD,OAJAA,KAAK0M,OAAO,EAAGb,GACf7L,KAAK0M,OAAO,EAAGX,GACf/L,KAAK0M,OAAO,EAAGV,GACfhM,KAAK0M,OAAO,EAAG+C,GACRzP,IACV,I,6BAGD,WAEI,OADU,IAAI2M,GACLL,UACZ,G,sBAED,WAEI,OADU,IAAIK,GACLJ,MACZ,G,gCAED,SAA0BC,GACtB,IAAMzC,EAAI4C,EAAKF,eAKf,OAHA1C,EAAE2C,OAAO,EAAG,IAAI7C,EAAK,EAAK,EAAI2C,EAAE,GAAKA,EAAE,GAAK,EAAIA,EAAE,GAAKA,EAAE,GAAI,EAAIA,EAAE,GAAKA,EAAE,GAAK,EAAIA,EAAE,GAAKA,EAAE,GAAI,EAAIA,EAAE,GAAKA,EAAE,GAAK,EAAIA,EAAE,GAAKA,EAAE,GAAI,IACnIzC,EAAE2C,OAAO,EAAG,IAAI7C,EAAK,EAAI2C,EAAE,GAAKA,EAAE,GAAK,EAAIA,EAAE,GAAKA,EAAE,GAAI,EAAK,EAAMA,EAAE,GAAKA,EAAE,GAAK,EAAIA,EAAE,GAAKA,EAAE,GAAI,EAAIA,EAAE,GAAKA,EAAE,GAAK,EAAIA,EAAE,GAAKA,EAAE,GAAI,IACrIzC,EAAE2C,OAAO,EAAG,IAAI7C,EAAK,EAAI2C,EAAE,GAAKA,EAAE,GAAK,EAAIA,EAAE,GAAKA,EAAE,GAAI,EAAIA,EAAE,GAAKA,EAAE,GAAK,EAAIA,EAAE,GAAKA,EAAE,GAAK,EAAI,EAAIA,EAAE,GAAKA,EAAE,GAAK,EAAIA,EAAE,GAAKA,EAAE,GAAI,IAC5HzC,CACV,G,6BAED,SAAuBG,EAAGC,EAAGC,GAMzB,OALIF,aAAalB,GAAgBkB,EAAEvE,QAAU,IACzCwE,EAAID,EAAE,GACNE,EAAIF,EAAE,GACNA,EAAIA,EAAE,IAEH,IAAIyC,EACP,EAAK,EAAK,EAAK,EACf,EAAK,EAAK,EAAK,EACf,EAAK,EAAK,EAAK,EACXzC,EAAKC,EAAKC,EAAG,EAExB,G,0BAED,SAAoBiF,EAAOnF,EAAGC,EAAGC,GAC7B,IAAMqH,EAAO,IAAI5H,EAAIK,EAAEC,EAAEC,GACzBqH,EAAKnG,YAEL,IAAIoG,EAAW9K,KAAKsB,IAAImH,GACpBsC,EAAY,EAAMD,EAClBE,EAAWhL,KAAKuB,IAAIkH,GAExB,OAAO,IAAI1C,EACP8E,EAAKvH,EAAIuH,EAAKvH,EAAIyH,EAAYD,EAAUD,EAAKvH,EAAIuH,EAAKtH,EAAIwH,EAAYF,EAAKrH,EAAIwH,EAAUH,EAAKvH,EAAIuH,EAAKrH,EAAIuH,EAAYF,EAAKtH,EAAIyH,EAAU,EAC1IH,EAAKtH,EAAIsH,EAAKvH,EAAIyH,EAAYF,EAAKrH,EAAIwH,EAAUH,EAAKtH,EAAIsH,EAAKtH,EAAIwH,EAAYD,EAAUD,EAAKtH,EAAIsH,EAAKrH,EAAIuH,EAAYF,EAAKvH,EAAI0H,EAAU,EAC1IH,EAAKrH,EAAIqH,EAAKvH,EAAIyH,EAAYF,EAAKtH,EAAIyH,EAAUH,EAAKrH,EAAIqH,EAAKtH,EAAIwH,EAAYF,EAAKvH,EAAI0H,EAAUH,EAAKrH,EAAIqH,EAAKrH,EAAIuH,EAAYD,EAAU,EAC1I,EAAE,EAAE,EAAE,EAEb,G,uBAED,SAAiBxH,EAAGC,EAAGC,GAMnB,OALIF,aAAalB,GAAiBkB,EAAEvE,QAAU,IAC1CwE,EAAID,EAAE,GACNE,EAAIF,EAAE,GACNA,EAAIA,EAAE,IAEH,IAAIyC,EACPzC,EAAG,EAAG,EAAG,EACT,EAAGC,EAAG,EAAG,EACT,EAAG,EAAGC,EAAG,EACT,EAAG,EAAG,EAAG,EAEhB,G,6BAGD,SAAuByC,EAAMC,EAAQC,EAAWC,GAC5C,OAAQ,IAAIL,GAAQkF,YAAYhF,EAAMC,EAAQC,EAAWC,EAC5D,G,yBAED,SAAmBK,EAAMC,EAAOC,EAAQC,EAAKT,EAAWC,GACpD,OAAQ,IAAIL,GAAQS,QAAQC,EAAMC,EAAOC,EAAQC,EAAKT,EAAWC,EACpE,G,uBAED,SAAiBK,EAAMC,EAAOC,EAAQC,EAAKT,EAAWC,GAClD,OAAQ,IAAIL,GAAQmF,MAAMzE,EAAMC,EAAOC,EAAQC,EAAKT,EAAWC,EAClE,G,wBAED,SAAkB+E,EAAQC,EAAQC,GAC9B,OAAQ,IAAItF,GAAQuF,OAAOH,EAAOC,EAAOC,EAC5C,G,kBAGD,SAAYxE,EAAEC,GAEV,OADe,IAAIf,EAAKc,GACV0B,KAAKzB,EACtB,G,uBAED,SAAiBxD,EAAGC,EAAGgI,EAAOC,EAAOC,EAAMC,GACvC,IAAIC,EAAM,IAAI5F,EAAK0F,GACnBE,EAAIpD,KAAKiD,GACTG,EAAIC,SAEJ,IAAMC,EAAM,IAAI5I,GAAMK,EAAIoI,EAASnI,GAAKmI,EAASvH,MAAS,EAAM,GACtCZ,EAAImI,EAASpI,GAAKoI,EAAStH,OAAU,EAAM,EACrC,EAARmH,EAAc,EACd,GAElB/N,EAAS,IAAIsO,KAAKH,EAAII,WAAWF,IAWvC,OAVc,GAAVrO,EAAOgG,EACPhG,EAAOwO,IAAI,GAGXxO,EAAOwO,IAAKxO,EAAO8F,EAAE9F,EAAOiG,EAChBjG,EAAO+F,EAAE/F,EAAOiG,EAChBjG,EAAOgG,EAAEhG,EAAOiG,EAChBjG,EAAOiG,EAAEjG,EAAOiG,GAGzBjG,CACV,G,sBAED,SAAgB2F,GACZ,OAAO,IAAIF,EACPA,EAAIG,UAAU,CAACD,EAAE,GAAIA,EAAE,GAAIA,EAAE,KAC7BF,EAAIG,UAAU,CAACD,EAAE,GAAIA,EAAE,GAAIA,EAAE,KAC7BF,EAAIG,UAAU,CAACD,EAAE,GAAIA,EAAE,GAAIA,EAAE,MAEpC,G,yBAED,SAAmBA,GACf,IAAMwB,EAAQoB,EAAKkG,SAAS9I,GAC5B,OAAO,IAAI4C,EACH5C,EAAE,GAAKwB,EAAMrB,EAAGH,EAAE,GAAKwB,EAAMpB,EAAGJ,EAAG,GAAKwB,EAAMnB,EAAG,EACjDL,EAAE,GAAKwB,EAAMrB,EAAGH,EAAE,GAAKwB,EAAMpB,EAAGJ,EAAG,GAAKwB,EAAMnB,EAAG,EACjDL,EAAE,GAAKwB,EAAMrB,EAAGH,EAAE,GAAKwB,EAAMpB,EAAGJ,EAAE,IAAMwB,EAAMnB,EAAG,EACjD,EAAM,EAAK,EAAI,EAE1B,G,yBAED,SAAmBL,GACf,OAAO,IAAIF,EAAIE,EAAE,IAAKA,EAAE,IAAKA,EAAE,IAClC,G,yBAED,SAAmBA,GACf,IAAM+I,EAAW,IAAInG,EAAK5C,GAE1B,OADA+I,EAASN,SACFM,CACV,G,6BAED,SAAuB/I,GACnB,OAAO,IAAI4C,EAAK5C,GACXyI,SACAO,WACAC,IACR,G,oBAED,SAAcjJ,EAAEkJ,GACZ,OAAOlJ,EAAG,IAAMkJ,EAAG,IAAMlJ,EAAG,IAAMkJ,EAAG,IAAMlJ,EAAG,IAAMkJ,EAAG,IAAMlJ,EAAG,IAAMkJ,EAAG,IACjElJ,EAAG,IAAMkJ,EAAG,IAAMlJ,EAAG,IAAMkJ,EAAG,IAAMlJ,EAAG,IAAMkJ,EAAG,IAAMlJ,EAAG,IAAMkJ,EAAG,IAClElJ,EAAG,IAAMkJ,EAAG,IAAMlJ,EAAG,IAAMkJ,EAAG,IAAMlJ,EAAE,KAAOkJ,EAAE,KAAOlJ,EAAE,KAAOkJ,EAAE,KACjElJ,EAAE,KAAOkJ,EAAE,KAAOlJ,EAAE,KAAOkJ,EAAE,KAAOlJ,EAAE,KAAOkJ,EAAE,KAAOlJ,EAAE,KAAOkJ,EAAE,GAC5E,G,gCAED,SAA0BC,EAAaC,GACnC,IAAMC,EAAY,IAAIvJ,EAAIsJ,GACpBE,EAAM,IAAI1G,EAAKuG,GAIrB,OAHAG,EAAI3G,OAAO,EAAG,IAAI7C,EAAI,EAAG,EAAG,EAAG,IAC/BuJ,EAAUE,OAAOD,EAAIV,WAAWS,GAAWG,KAC3CH,EAAU9H,YACH8H,CACV,G,mBAED,WACI,OAAOjI,MAAMnL,KAAM,KAAOmL,MAAMnL,KAAM,KAAOmL,MAAMnL,KAAM,KAAOmL,MAAMnL,KAAM,KACpEmL,MAAMnL,KAAM,KAAOmL,MAAMnL,KAAM,KAAOmL,MAAMnL,KAAM,KAAOmL,MAAMnL,KAAM,KACrEmL,MAAMnL,KAAM,KAAOmL,MAAMnL,KAAM,KAAOmL,MAAMnL,KAAK,MAAQmL,MAAMnL,KAAK,MACpEmL,MAAMnL,KAAK,MAAQmL,MAAMnL,KAAK,MAAQmL,MAAMnL,KAAK,MAAQmL,MAAMnL,KAAK,IAC/E,G,oBAED,SAAc+J,GACV,OAAOV,EAAOU,EAAG,KAAOV,EAAOU,EAAG,KAAOV,EAAOU,EAAG,KAAOV,EAAOU,EAAG,KAC5DV,EAAOU,EAAG,KAAOV,EAAOU,EAAG,KAAOV,EAAOU,EAAG,KAAOV,EAAOU,EAAG,KAC7DV,EAAOU,EAAG,KAAOV,EAAOU,EAAG,KAAOV,EAAOU,EAAE,MAAQV,EAAOU,EAAE,MAC5DV,EAAOU,EAAE,MAAQV,EAAOU,EAAE,MAAQV,EAAOU,EAAE,MAAQV,EAAOU,EAAE,IACvE,G,wBAED,SAAkBA,GACd,OAAOT,EAAOS,EAAG,GAAG,IAAMT,EAAOS,EAAG,GAAG,IAAMT,EAAOS,EAAG,GAAG,IAAMT,EAAOS,EAAG,GAAG,IACrET,EAAOS,EAAG,GAAG,IAAMT,EAAOS,EAAG,GAAG,IAAMT,EAAOS,EAAG,GAAG,IAAMT,EAAOS,EAAG,GAAG,IACtET,EAAOS,EAAG,GAAG,IAAMT,EAAOS,EAAG,GAAG,IAAMT,EAAOS,EAAE,IAAI,IAAMT,EAAOS,EAAE,IAAI,IACtET,EAAOS,EAAE,IAAI,IAAMT,EAAOS,EAAE,IAAI,IAAMT,EAAOS,EAAE,IAAI,IAAMT,EAAOS,EAAE,IAAI,EACjF,I,gCAvoBgB4C,CAAa3D,G,ygECDlC,IA2BMwK,GAAqB,SAAC1N,GAAyB,IAAlB2N,EAAkB,wDAC3CC,EAAe5N,EAAM6N,WAC3BD,EAAaE,YAAY9N,GACzB+N,SAASC,KAAKC,YAAYjO,GAC1BA,EAAMkO,MAAMpP,SAAW,QACvBkB,EAAMkO,MAAMjJ,MAAQ,QACpBjF,EAAMkO,MAAMhJ,OAAS,OACrBlF,EAAMkO,MAAMxG,IAAM,MAClB1H,EAAMkO,MAAM3G,KAAO,MACdoG,IACD3N,EAAMkO,MAAMC,QAAU,OAE7B,EAEYC,GAAb,wB,EAAA,UACI,WAAYC,EAAQC,EAAgBC,GAAQ,0BACxC,cAAM,SAAUF,EAAQC,IACnBC,OAASA,EACd,EAAKC,QAAL,UAAeD,EAAOC,eAAtB,QAAiC,EACjC,EAAKC,QAAL,UAAeF,EAAOE,eAAtB,QAAiC,GACjC,EAAKC,OAAL,UAAcH,EAAOG,cAArB,QAA+B,EAC/B,EAAKC,OAAL,UAAcJ,EAAOI,cAArB,QAA+B,EAE/B,IAAIC,EAAe,CAAC,EAAE,GAClBC,GAAO,EAT6B,OAUxC,EAAKC,OAAS,EACd,EAAKC,KAAO,EACZ,EAAKC,QAAQC,iBAAiB,aAAa,SAAAC,GACvCL,GAAO,EACPD,EAAe,CAACM,EAAIC,QAASD,EAAIE,SACjCF,EAAIG,iBACP,IAED,EAAKL,QAAQC,iBAAiB,SAAS,SAAAC,GACnCA,EAAIG,iBACP,IAED,EAAKL,QAAQC,iBAAiB,WAAW,SAAAC,GACrCL,GAAO,EACPK,EAAIG,iBACP,IAED,EAAKL,QAAQC,iBAAiB,SAAS,SAAAC,GACnC,EAAKI,aAAeJ,EAAIK,OAAS,IAC7B,EAAKD,YAAc,EAAKd,QACxB,EAAKc,YAAc,EAAKd,QAEnB,EAAKc,YAAc,EAAKb,UAC7B,EAAKa,YAAc,EAAKb,SAE5BS,EAAIG,kBACJH,EAAIM,gBACP,IAED,EAAKR,QAAQC,iBAAiB,YAAY,SAAAC,GACtCL,GAAO,EACPK,EAAIG,iBACP,IAED,EAAKL,QAAQC,iBAAiB,aAAa,SAAAC,GACvC,GAAIL,EAAM,CACN,IAAMY,EAAS,CAACP,EAAIC,QAASD,EAAIE,SAC3BM,EAAO,CAACd,EAAa,GAAKa,EAAO,GAAIb,EAAa,GAAKa,EAAO,IACpEb,EAAea,EACf,EAAKV,MAAkB,KAAVW,EAAK,GAAa,EAAKhB,OACpC,EAAKI,QAAoB,KAAVY,EAAK,GAAa,EAAKf,OAClC,EAAKI,KAAK,EAAEjO,KAAKC,GACjB,EAAKgO,KAAO,EAAKA,KAAO,EAAIjO,KAAKC,GAE5B,EAAKgO,KAAK,IACf,EAAKA,KAAO,EAAIjO,KAAKC,GAAK,EAAKgO,MAG/B,EAAKD,OAAOhO,KAAKC,GAAK,EACtB,EAAK+N,OAAShO,KAAKC,GAAK,EAEnB,EAAK+N,SAAShO,KAAKC,GAAK,IAC7B,EAAK+N,QAAUhO,KAAKC,GAAK,EAGhC,CACDmO,EAAIG,iBACP,IAnEuC,CAoE3C,CArEL,sC,EAAA,yBAuEI,WAAiBhB,GAAjB,8GACInU,KAAKoV,YAAc,EACnBpV,KAAKyV,aAAetB,EAEpBA,EAAOW,QAAQd,MAAMjJ,MAAQ,OAC7BoJ,EAAOW,QAAQd,MAAMhJ,OAAS,OAC9BmJ,EAAOW,QAAQd,MAAMpP,SAAW,WAChCuP,EAAOW,QAAQd,MAAMxG,IAAM,IAC3B2G,EAAOW,QAAQd,MAAM3G,KAAO,IAE5BrN,KAAK8U,QAAQd,MAAM0B,SAAW,SAC9B1V,KAAK8U,QAAQd,MAAMpP,SAAW,WAE9B5E,KAAKyV,aAAetB,EACpBA,EAAOW,QAAQa,YAAc,GAC7BnC,GAAmBoC,MAAM5V,KAAM,CAACmU,EAAOW,SAAS,IAEhD9U,KAAK6V,aAAe,IAAI/V,EAAYE,KAAK8U,SAjB7C,UAkBU9U,KAAK6V,aAAaC,KAAK,CAAE1V,WAAY,CAAC,GAAK,GAAK,GAAK,KAlB/D,QAoBYH,EAAOD,KAAK6V,aAAZ5V,GAEF8V,EAAe,IAAIlQ,EAAa5F,EAAIkU,EAAOW,SAE3CjU,EAAS,IAAIS,EAAOrB,EAAI,CAC1BsB,OAzIG,0QAyIKC,SAzHH,wKA0HLC,QAAS,CAAE,cAAe,cAC1BC,SAAU,CAAE,QAAS,QAAS,mBAG5BsU,EAAa9O,EAAa,IAC1B+O,EAAS,IAAItR,EAAY1E,EAAI+V,EAAWvO,UAAWuO,EAAWtO,IAAKsO,EAAW3N,WAE9EtI,EAASC,KAAK8U,QACP,SAAPoB,IACF,IAAM7L,EAAItK,EAAOoW,YACX5L,EAAIxK,EAAOqW,aAEXC,EAAM,GAAK,EAAKjB,YAChBkB,EAAcjM,EAAIE,EAClBgM,EAAa5J,EAAK6J,gBAAgBH,EAAKlL,MAAMmL,GAAe,GAAG,EAAIA,EAAa,IAAM,IACtFG,EAAO9J,EAAKF,eACZiK,EAAQ/J,EAAK2C,aAAa,EAAKuF,KAAM,EAAG,EAAG,GACjD6B,EAAMC,OAAO,EAAK/B,OAAQ,EAAG,EAAG,GAEhCmB,EAAaa,gBACb7W,EAAOgL,MAAQV,EACftK,EAAOiL,OAAST,EAChBtK,EAAGqS,SAAS,EAAG,EAAGjI,EAAGE,GACrBtK,EAAGM,MAAMN,EAAGO,kBAEZK,EAAOiC,aACPjC,EAAOgW,oBAAoB,cAAeZ,GAC1CpV,EAAOiW,oBAAoB,aAAcb,GACzCpV,EAAOkW,YAAY,QAASpK,EAAKqK,KAAKN,EAAMD,IAC5C5V,EAAOkW,YAAY,QAASR,GAC5B1V,EAAO+C,YAAY,gBAAiBmS,EAAatS,SACjDwS,EAAOC,OACPe,sBAAsBf,EACzB,CACDA,GA5DJ,gDAvEJ,E,8KAAA,mDAAoCgB,EAAAA,QAuIfC,GAAAA,SAAAA,G,6HACjB,WACI,OAAOvX,EAAAA,QAAAA,KACV,G,gBAED,WACI,OAAO,gCAAc,8BACxB,G,sBAED,WAAmB,MAAO,UAAa,G,0BAEvC,SAAawX,GAAQ,aACjB,kBAAIA,EAAOrX,cAAX,QAAI,EAAesX,MAAK,SAAAC,GAAC,OAAIA,GAAK,EAAKC,UAAd,MAIzB,iDAA0BH,EAC7B,G,+BAED,SAAkBhD,GACd,OAAO,IAAIF,GAAelU,KAAKmU,OAAQC,EAAgBpU,KAAKqU,OAC/D,K,EArBgB8C,CAA6BK,EAAAA,a,gBCzLlD,IAAIC,EAAM,CACT,yBAA0B,IAC1B,oCAAqC,KAItC,SAASC,EAAeC,GACvB,IAAIC,EAAKC,EAAsBF,GAC/B,OAAOG,EAAoBF,EAC5B,CACA,SAASC,EAAsBF,GAC9B,IAAIG,EAAoBC,EAAEN,EAAKE,GAAM,CACpC,IAAIK,EAAI,IAAI7X,MAAM,uBAAyBwX,EAAM,KAEjD,MADAK,EAAEC,KAAO,mBACHD,CACP,CACA,OAAOP,EAAIE,EACZ,CACAD,EAAeQ,KAAO,WACrB,OAAOC,OAAOD,KAAKT,EACpB,EACAC,EAAeU,QAAUP,EACzBzY,EAAOD,QAAUuY,EACjBA,EAAeE,GAAK,G,uBCvBpBxY,EAAOD,QAAUO,C,GCCb2Y,EAA2B,CAAC,EAGhC,SAASP,EAAoBQ,GAE5B,IAAIC,EAAeF,EAAyBC,GAC5C,QAAqB9Y,IAAjB+Y,EACH,OAAOA,EAAapZ,QAGrB,IAAIC,EAASiZ,EAAyBC,GAAY,CAGjDnZ,QAAS,CAAC,GAOX,OAHAqZ,EAAoBF,GAAUlZ,EAAQA,EAAOD,QAAS2Y,GAG/C1Y,EAAOD,OACf,CCrBA2Y,EAAoBW,EAAI,CAACtZ,EAASuZ,KACjC,IAAI,IAAIC,KAAOD,EACXZ,EAAoBC,EAAEW,EAAYC,KAASb,EAAoBC,EAAE5Y,EAASwZ,IAC5ER,OAAOS,eAAezZ,EAASwZ,EAAK,CAAEE,YAAY,EAAMC,IAAKJ,EAAWC,IAE1E,ECNDb,EAAoBC,EAAI,CAACgB,EAAKC,IAAUb,OAAOc,UAAUC,eAAeC,KAAKJ,EAAKC,GCClFlB,EAAoBtN,EAAKrL,IACH,oBAAXia,QAA0BA,OAAOC,aAC1ClB,OAAOS,eAAezZ,EAASia,OAAOC,YAAa,CAAEtV,MAAO,WAE7DoU,OAAOS,eAAezZ,EAAS,aAAc,CAAE4E,OAAO,GAAO,E,2HCF/C,SAASuV,IACpB,OAAOja,EAAAA,IACV,CAEM,IAAMka,EAAe,CACxB,CACIC,OAAQtF,EAAAA,QACRG,OAAQ,CACJoF,SAAS,KAKRtC,EAAuBjD,EAAAA,O","sources":["webpack://paella-webgl-plugins/webpack/universalModuleDefinition","webpack://paella-webgl-plugins/./src/plugins/WebGLPluginModule.js","webpack://paella-webgl-plugins/./src/js/WebGLCanvas.js","webpack://paella-webgl-plugins/./src/js/Shader.js","webpack://paella-webgl-plugins/./src/js/SceneObject.js","webpack://paella-webgl-plugins/./src/js/VideoTexture.js","webpack://paella-webgl-plugins/./src/js/primitives.js","webpack://paella-webgl-plugins/./src/js/math/constants.js","webpack://paella-webgl-plugins/./src/js/math/functions.js","webpack://paella-webgl-plugins/./src/js/math/Vec.js","webpack://paella-webgl-plugins/./src/js/math/Mat3.js","webpack://paella-webgl-plugins/./src/js/math/Mat4.js","webpack://paella-webgl-plugins/./src/plugins/es.upv.paella.video360Canvas.js","webpack://paella-webgl-plugins/./src/plugins/ sync \\.js","webpack://paella-webgl-plugins/external umd {\"commonjs\":\"paella-core\",\"commonjs2\":\"paella-core\",\"amd\":\"paella-core\"}","webpack://paella-webgl-plugins/webpack/bootstrap","webpack://paella-webgl-plugins/webpack/runtime/define property getters","webpack://paella-webgl-plugins/webpack/runtime/hasOwnProperty shorthand","webpack://paella-webgl-plugins/webpack/runtime/make namespace object","webpack://paella-webgl-plugins/./src/index.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"paella-core\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"paella-core\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"paella-webgl-plugins\"] = factory(require(\"paella-core\"));\n\telse\n\t\troot[\"paella-webgl-plugins\"] = factory(root[undefined]);\n})(self, (__WEBPACK_EXTERNAL_MODULE__995__) => {\nreturn ","import { PluginModule } from \"paella-core\";\nimport packageData from \"../../package.json\";\n\nlet g_pluginModule = null;\n\nexport default class WebGLPluginsModule extends PluginModule {\n    static Get() {\n        if (!g_pluginModule) {\n            g_pluginModule = new WebGLPluginsModule();\n        }\n        return g_pluginModule;\n    }\n\n    get moduleName() {\n        return \"paella-webgl-plugins\";\n    }\n\n    get moduleVersion() {\n        return packageData.version;\n    }\n}","\nexport default class WebGLCanvas {\n    constructor(canvas) {\n        this.gl = canvas.getContext(\"webgl\");\n\n        if (this.gl === null) {\n            throw new Error(\"This browser does not support WebGL\");\n        }\n    }\n    \n    async init({ clearColor = [0, 0, 0, 1] } = {}) {\n        const gl = this.gl; \n        gl.enable(gl.DEPTH_TEST);\n        gl.clearColor(...clearColor);\n        gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n    }\n}","\nconst defaultVertex = `\n\nattribute vec4 inVertexPos;\n\nvoid main() {\n    gl_Position = inVertexPos;\n}\n`;\n\nconst defaultFragment = `\nvoid main() {\n    gl_FragColor = vec4(1.0, 0.5, 1.0, 1.0);\n}\n`;\n\nconst loadShader = (gl, type, source) => {\n    const shader = gl.createShader(type);\n    gl.shaderSource(shader, source);\n    gl.compileShader(shader);\n    if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n        console.error(`Error compiling shdaer: \\n${gl.getShaderInfoLog(shader)}`);\n    }\n    return shader;\n}\n\nexport default class Shader {\n    constructor(gl, { vertex = defaultVertex, fragment = defaultFragment, attribs = [], uniforms = [] }) {\n        this.gl = gl;\n        const vShader = loadShader(gl, gl.VERTEX_SHADER, vertex);\n        const fShader = loadShader(gl, gl.FRAGMENT_SHADER, fragment);\n\n        const shaderProgram = gl.createProgram();\n        gl.attachShader(shaderProgram, vShader);\n        gl.attachShader(shaderProgram, fShader);\n        gl.linkProgram(shaderProgram);\n\n        if (!gl.getProgramParameter(shaderProgram, gl.LINK_STATUS)) {\n            console.error(`Unable to initialize shader program: ${gl.getProgramInfoLog(shaderProgram)}`);\n        }\n\n        gl.deleteShader(vShader);\n        gl.deleteShader(fShader);\n        this._shaderProgram = shaderProgram;\n\n        this.attribs = {};\n        attribs.forEach(attrib => {\n            this.attribs[attrib] = gl.getAttribLocation(shaderProgram, attrib);\n            if (this.attribs[attrib] == -1) {\n                console.warn(`Attribute not found in shader: '${attrib}'`);\n            }\n        });\n\n\n        this.uniforms = {};\n        uniforms.forEach(uniform => {\n            this.uniforms[uniform] = gl.getUniformLocation(shaderProgram, uniform);\n            if (this.uniforms[uniform] === null) {\n                console.warn(`Uniform not found in shader: ${uniform}`);\n            }\n        });\n    }\n\n    useProgram() {\n        this.gl.useProgram(this._shaderProgram);\n    }\n\n    enablePositionArray(attribName, vertexBuffer) {\n        vertexBuffer.bindPositions();\n        this.enableArray(attribName, 3);\n    }\n\n    enableTexCoordArray(attribName, vertexBuffer) {\n        vertexBuffer.bindTexCoord();\n        this.enableArray(attribName, 2);\n    }\n\n    enableArray(attribName, numComponents) {\n        const { gl } = this;\n        gl.enableVertexAttribArray(this.attribs[attribName]);\n        gl.vertexAttribPointer(this.attribs[attribName], numComponents, gl.FLOAT, false, 0, 0);\n    }\n\n    bindTexture(uniformName, texture) {\n        const { gl } = this;\n        gl.activeTexture(gl.TEXTURE0);\n        gl.bindTexture(gl.TEXTURE_2D, texture);\n        gl.uniform1i(this.uniforms[uniformName], 0);\n    }\n\n    bindFloat(uniformName, value) {\n        this.gl.uniform1f(this.uniforms[uniformName], value);\n    }\n\n    bindMatrix4(uniformName, value) {\n        this.gl.uniformMatrix4fv(this.uniforms[uniformName], false, value);\n    }\n}","\nfunction createVertexBuffer(gl, vertexData) {\n    const result = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, result);\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertexData), gl.STATIC_DRAW);\n    return result;\n}\n\nfunction createIndexBuffer(gl, indexData) {\n    const result = gl.createBuffer();\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, result);\n    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(indexData), gl.STATIC_DRAW);\n    return result;\n}\n\nexport default class SceneObject {\n    constructor(gl, position, texCoord, index) {\n        this.gl = gl;\n        this.positionArray = position;\n        this.positionBuffer = createVertexBuffer(gl, position);\n        this.texCoordArray = texCoord;\n        this.texCoordBuffer = createVertexBuffer(gl, texCoord);\n        this.indexArray = index;\n        this.indexBuffer = createIndexBuffer(gl, index);\n    }\n\n    bindPositions() {\n        this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.positionBuffer);\n    }\n\n    bindTexCoord() {\n        this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.texCoordBuffer);\n    }\n\n    draw() {\n        this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, this.indexBuffer);\n        this.gl.drawElements(this.gl.TRIANGLES, this.indexArray.length, this.gl.UNSIGNED_SHORT, 0);\n    }\n}","\n\nexport default class VideoTexture {\n    constructor(gl, video) {\n        this.gl = gl;\n        this.video = video;\n        this.texture = gl.createTexture();\n        gl.bindTexture(gl.TEXTURE_2D, this.texture);\n\n        const pixel = new Uint8Array([0, 0, 255, 255]);\n        gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA,1,1,0,gl.RGBA,gl.UNSIGNED_BYTE,pixel);\n\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n    }\n\n    updateTexture() {\n        const { gl } = this;\n        gl.bindTexture(gl.TEXTURE_2D, this.texture);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, this.video);\n    }\n}","\nexport const TWO_PI = Math.PI * 2;\n\nexport const QUARTER_TURN = Math.PI / 2;\n\nexport function latLngToCartesian([radius, lat, lng]){\n\tlng = -lng + Math.PI / 2;\n\treturn [\n\t\tradius * Math.cos(lat) * Math.cos(lng),\n\t\tradius * Math.sin(lat),\n\t\tradius * -Math.cos(lat) * Math.sin(lng),\n\t];\n}\n\nexport function inverseLerp(start, end, value) {\n\treturn (value - start) / (end - start);\n}\n\n\nexport function createSphere(density){\n\tconst radsPerUnit = Math.PI / density;\n\tconst sliceVertCount = density * 2;\n\n\t//positions and UVs\n\tconst positions = [];\n\tconst uvs = [];\n\tlet latitude = -Math.PI / 2;\n\t//latitude\n\tfor(let i = 0; i <= density; i++){\n\t\tconst v = inverseLerp(-QUARTER_TURN, QUARTER_TURN, -latitude);\n\t\tlet longitude = 0;\n\t\tlet vertLength = sliceVertCount + ((i > 0 && i < density) ? 1 : 0); //middle rings need extra vert for end U value\n\t\t//longitude\n\t\tfor (let j = 0; j < vertLength; j++) {\n\t\t\tpositions.push(latLngToCartesian([1, latitude, longitude]));\n\t\t\tuvs.push([inverseLerp(0, TWO_PI, longitude), v]);\n\t\t\tlongitude += radsPerUnit;\n\t\t}\n\t\tlatitude += radsPerUnit;\n\t}\n\n\t//colors\n\tconst colors = [];\n\tfor(let i = 0; i < positions.length; i++){\n\t\tcolors.push([1, 1, 0]);\n\t}\n\n\t//triangles\n\tconst triangles = [];\n\tlet ringStartP = 0;\n\tfor(let ring = 0; ring < density; ring++){ // start at first ring\n\t\tconst vertexBump = (ring > 0 ? 1 : 0);\n\t\tfor (let sliceVert = 0; sliceVert < sliceVertCount; sliceVert++){\n\t\t\tconst thisP = ringStartP + sliceVert;\n\t\t\tconst nextP = ringStartP + sliceVert + 1;\n\t\t\tconst nextRingP = thisP + sliceVertCount + vertexBump;\n\t\t\tconst nextRingNextP = nextP + sliceVertCount + vertexBump;\n\n\t\t\tif(ring === 0){\n\t\t\t\ttriangles.push([thisP, nextRingNextP, nextRingP]);\n\t\t\t}\n\t\t\tif(ring === density - 1){\n\t\t\t\ttriangles.push([thisP, nextP, nextRingP]);\n\t\t\t}\n\t\t\tif(ring > 0 && ring < density - 1 && density > 2){\n\t\t\t\ttriangles.push([thisP, nextRingNextP, nextRingP])\n\t\t\t\ttriangles.push([thisP, nextP, nextRingNextP])\n\t\t\t}\n\t\t}\n\t\tif(ring === 0){\n\t\t\tringStartP += sliceVertCount;\n\t\t} else {\n\t\t\tringStartP += sliceVertCount + 1;\n\t\t}\n\t}\n\n\n\treturn {\n\t\tpositions: positions.flat(),\n\t\tcolors: colors.flat(),\n\t\ttriangles: triangles.flat(),\n\t\tuvs: uvs.flat(),\n\t\tnormals: positions.flat()\n\t};\n}","/*\n    Extracted from bg2 engine source code: https://github.com/ferserc1/bg2e-js.git\n    file: bg2e/math/constants.js\n */\nexport const Axis = {\n\tNONE: 0,\n\tX: 1,\n\tY: 2,\n\tZ: 3,\n    name: (axis) => {\n        switch (axis) {\n        case Axis.NONE:\n            return \"NONE\";\n        case Axis.X:\n            return \"X\";\n        case Axis.Y:\n            return \"Y\";\n        case Axis.Z:\n            return \"Z\";\n        case Axis.W:\n            return \"W\";\n        default:\n            return \"UNKNOWN\"\n        };\n    }\n};\n\nexport const PI = 3.141592653589793;\nexport const DEG_TO_RAD = 0.01745329251994;\nexport const RAD_TO_DEG = 57.29577951308233;\nexport const PI_2 = 1.5707963267948966;\nexport const PI_4 = 0.785398163397448;\nexport const PI_8 = 0.392699081698724;\nexport const TWO_PI = 6.283185307179586;\nexport const EPSILON = 0.0000001;\n\n// Default array: 32 bits\nexport const NumericArray = Float32Array;\nexport const NumericArrayHighP = Float64Array;\nexport const FLOAT_MAX = 3.402823e38;\n","/*\n    Extracted from bg2 engine source code: https://github.com/ferserc1/bg2e-js.git\n    file: bg2e/math/functions.js\n */\n\nimport {\n    EPSILON,\n    DEG_TO_RAD,\n    RAD_TO_DEG\n} from './constants.js';\n\nlet s_bg_math_seed = Date.now();\n\nexport const checkPowerOfTwo = (n) => {\n    if (typeof n !== 'number') {\n        return false;\n    }\n    else {\n        return n && (n & (n - 1)) === 0;\n    }  \n}\n\nexport const checkZero = (v) => {\n    return v>-EPSILON && v<EPSILON ? 0:v;\n}\n\nexport const isZero = (v) => {\n    return checkZero(v) === 0;\n}\n\nexport const equals = (a,b) => {\n    return Math.abs(a - b) < EPSILON;\n}\n\nexport const degreesToRadians = (d) => {\n    return Math.fround(checkZero(d * DEG_TO_RAD));\n}\n\nexport const radiansToDegrees = (r) => {\n    return Math.fround(checkZero(r * RAD_TO_DEG));\n}\n\nexport const sin = (val) => {\n    return Math.fround(checkZero(Math.sin(val)));\n}\n\nexport const cos = (val) => {\n    return Math.fround(checkZero(Math.cos(val)));\n}\n\nexport const tan = (val) => {\n    return Math.fround(checkZero(Math.tan(val)));\n}\n\nexport const cotan = (val) => {\n    return Math.fround(checkZero(1.0 / tan(val)));\n}\n\nexport const atan = (val) => {\n    return Math.fround(checkZero(Math.atan(val)));\n}\n\nexport const atan2 = (i, j) => {\n    return Math.fround(checkZero(Math.atan2f(i, j)));\n}\n\nexport const random = () => {\n    return Math.random();\n}\n\nexport const seededRandom = () => {\n    const max = 1;\n    const min = 0;\n \n    s_bg_math_seed = (s_bg_math_seed * 9301 + 49297) % 233280;\n    const rnd = s_bg_math_seed / 233280;\n \n    return min + rnd * (max - min);\n}\n\nexport const max = (a,b) => {\n    return Math.fround(Math.max(a,b));\n}\n\nexport const min = (a,b) => {\n    return Math.fround(Math.min(a,b));\n}\n\nexport const abs = (val) => {\n    return Math.fround(Math.abs(val));\n}\n\nexport const sqrt = (val) => {\n    return Math.fround(Math.sqrt(val));\n}\n\nexport const lerp = (from, to, t) => {\n    return Math.fround((1.0 - t) * from + t * to);\n}\n\nexport const square = (n) => {\n    return Math.fround(n * n);\n}\n","/*\n    Extracted from bg2 engine source code: https://github.com/ferserc1/bg2e-js.git\n    file: bg2e/math/Vec.js\n */\n\nimport { NumericArray } from \"./constants\";\nimport { isZero, equals } from \"./functions\";\n\nconst checkEqualLength = (v1,v2) => {\n    if (v1.length!=v2.length) throw new Error(`Invalid vector length in operation`);\n}\n\nexport default class Vec extends NumericArray {\n    constructor() {\n        switch (arguments.length) {\n        case 0:\n            super([0, 0]);\n            break;\n        case 1:\n            if (arguments[0].length>1 && arguments[0].length<5)\n            {\n                super(arguments[0]);\n            }\n            break;\n        case 2:\n            if (arguments[0].length === 2 && typeof(arguments[1]) === \"number\"\n            ) {\n                super([ arguments[0][0], arguments[0][1], arguments[1]]);\n            }\n            else if (arguments[0].length === 3 &&\n                typeof(arguments[1]) === \"number\"\n            ) {\n                super([ arguments[0][0], arguments[0][1], arguments[0][2], arguments[1]]);\n            }\n            else if (typeof(arguments[0]) === \"number\" &&\n                typeof(arguments[1]) === \"number\"\n            ) {\n                super([arguments[0],arguments[1]]);\n            }\n            break;\n        case 3:\n            if (arguments[0].length === 2 &&\n                typeof(arguments[1]) === \"number\" && typeof(arguments[2]) === \"number\"\n            ) {\n                super([ arguments[0][0], arguments[0][1], arguments[1], arguments[2]])\n            }\n            else if (typeof(arguments[0]) === \"number\" &&\n                typeof(arguments[1]) === \"number\" &&\n                typeof(arguments[2]) === \"number\"\n            ) {\n                super([arguments[0],arguments[1],arguments[2]]);\n            }\n            break;\n        case 4:\n            super([arguments[0],arguments[1],arguments[2],arguments[3]]);\n            break;\n        default:\n            throw new Error(`Invalid parameters in Vec constructor`);\n        }\n    }\n\n    normalize() {\n        const m = Vec.Magnitude(this);\n        switch (this.length) {\n        case 4:\n            this[3] = this[3] / m;\n        case 3:\n            this[2] = this[2] / m;\n        case 2:\n            this[1] = this[1] / m;            \n            this[0] = this[0] / m;\n            break;\n        default:\n            throw new Error(`Invalid vector size: ${ this.length }`);\n        }\n        return this;\n    }\n\n    assign(src) {\n        checkEqualLength(this,src);\n        switch (this.length) {\n        case 4:\n            this[3] = src[3];\n        case 3:\n            this[2] = src[2];\n        case 2:\n            this[1] = src[1];\n            this[0] = src[0];\n            break;\n        default:\n            throw new Error(`Invalid vector size: ${ this.length }`);\n        }\n    }\n\n    set(x, y, z = null, w = null) {\n        if (this.length === 2) {\n            this[0] = x;\n            this[1] = y;\n        }\n        else if (this.length === 3 && z !== null) {\n            this[0] = x;\n            this[1] = y;\n            this[2] = z;\n        }\n        else if (this.length === 4 && w !== null) {\n            this[0] = x;\n            this[1] = y;\n            this[2] = z;\n            this[3] = w;\n        }\n        else {\n            throw new Error(`Invalid vector size: ${ this.length }. Trying to set x=${x}, y=${y}, z=${z}, w=${w}`);\n        }\n    }\n\n    scale(s) {\n        switch (this.length) {\n        case 4:\n            this[3] = this[3] * s;\n        case 3:\n            this[2] = this[2] * s;\n        case 2:\n            this[1] = this[1] * s;\n            this[0] = this[0] * s;\n            break;\n        default:\n            throw new Error(`Invalid vector size: ${ v.length }`);\n        }\n        return this;\n    }\n\n    get x() {\n        return this[0];\n    }\n\n    get y() {\n        return this[1];\n    }\n\n    get z() {\n        return this[2];\n    }\n\n    get w() {\n        return this[3];\n    }\n\n    set x(v) {\n        this[0] = v;\n        return this;\n    }\n\n    set y(v) {\n        this[1] = v;\n        return this;\n    }\n\n    set z(v) {\n        this[2] = v;\n        return this;\n    }\n\n    set w(v) {\n        this[3] = v;\n        return this;\n    }\n\n    get r() {\n        return this[0];\n    }\n\n    get g() {\n        return this[1];\n    }\n\n    get b() {\n        return this[2];\n    }\n\n    get a() {\n        return this[3];\n    }\n\n    set r(v) {\n        this[0] = v;\n        return this;\n    }\n\n    set g(v) {\n        this[1] = v;\n        return this;\n    }\n\n    set b(v) {\n        this[2] = v;\n        return this;\n    }\n\n    set a(v) {\n        this[3] = v;\n        return this;\n    }\n\n    get width() {\n        switch (this.length) {\n        case 2:\n            return this[0];\n        case 4:\n            return this[2];\n        default:\n            throw new Error(\"Vec.width function used on non size or viewport vectors (two or four elements)\");\n        }\n    }\n\n    get height() {\n        switch (this.length) {\n            case 2:\n                return this[1];\n            case 4:\n                return this[3];\n            default:\n                throw new Error(\"Vec.width function used on non size or viewport vectors (two or four elements)\");\n            }\n    }\n\n    set width(w) {\n        this[0] = w;\n        return this;\n    }\n\n    set height(h) {\n        this[1] = h;\n        return this;\n    }\n    \n    get xy() {\n        switch (this.length) {\n        case 2:\n            return new Vec(this);\n        case 3:\n        case 4:\n            return new Vec(this[0], this[1]);\n        default:\n            throw new Error(`Invalid vector size: ${ this.length }`);\n        }\n    }\n\n    get xz() {\n        switch (this.length) {\n        case 3:\n        case 4:\n            return new Vec(this[0], this[2]);\n        case 2:\n        default:\n            throw new Error(`Invalid vector size: ${ this.length }`);\n        }\n    }\n\n    get yz() {\n        switch (this.length) {\n        case 3:\n        case 4:\n            return new Vec(this[1], this[2]);\n        case 2:\n        default:\n            throw new Error(`Invalid vector size: ${ this.length }`);\n        }\n    }\n\n    set xy(v) {\n        this[0] = v[0];\n        this[1] = v[1];\n        return this;\n    }\n\n    set xz(v) {\n        if (this.length<3) {\n            throw new Error('Invalid vector size');\n        }\n        this[0] = v[0];\n        this[2] = v[1];\n        return this;\n    }\n\n    set yz(v) {\n        if (this.length<3) {\n            throw new Error('Invalid vector size');\n        }\n        this[1] = v[0];\n        this[2] = v[1];\n        return this;\n    }\n\n    get xyz() {\n        if (this.length < 3) {\n            throw new Error(`Invalid vector size: ${ this.length }`);\n        }\n        return new Vec(this[0], this[1], this[2]);\n    }\n\n    set xyz(v) {\n        if (v.length<3 || this.length<3) {\n            throw new Error(`Invalid vector size to set: l;${ this.length }, r:${v.length}`);\n        }\n        this[0] = v[0];\n        this[1] = v[1];\n        this[2] = v[2];\n        return this;\n    }\n\n    // Copy operator\n    get xyzw() {\n        if (this.length < 4) {\n            throw new Error(`Invalid vector size: ${ this.length }, 4 required`);\n        }\n        return new Vec(this[0], this[1], this[2], this[3]);\n    }\n\n    // Assign operator\n    set xyzw(v) {\n        if (this.length < 4 || v.length<4) {\n            throw new Error(`Invalid vector size to set: l;${ this.length }, r:${v.length}`);\n        }\n        this[0] = v[0];\n        this[1] = v[1];\n        this[2] = v[2];\n        this[3] = v[3];\n        return this;\n    }\n\n    get rgb() {\n        if (this.length < 3) {\n            throw new Error(`Invalid vector size: ${this.length}, but at least 3 required`);\n        }\n        return new Vec(this[0],this[1],this[2]);\n    }\n\n    set rgb(v) {\n        if (v.length<3 || this.length<3) {\n            throw new Error(`Invalid vector size to set: l;${ this.length }, r:${v.length}`);\n        }\n        this[0] = v[0];\n        this[1] = v[1];\n        this[2] = v[2];\n        return this;\n    }\n\n    get rg() {\n        if (v.length<3 || this.length<3) {\n            throw new Error(`Invalid vector size to set: l;${ this.length }, r:${v.length}`);\n        }\n        return new Vec(this[0], this[1]);\n    }\n\n    get gb() {\n        if (v.length<3 || this.length<3) {\n            throw new Error(`Invalid vector size to set: l;${ this.length }, r:${v.length}`);\n        }\n        return new Vec(this[1], this[2]);\n    }\n\n    get rb() {\n        if (v.length<3 || this.length<3) {\n            throw new Error(`Invalid vector size to set: l;${ this.length }, r:${v.length}`);\n        }\n        return new Vec(this[0], this[2]);\n    }\n\n    get hexColor() {\n        const r = Math.round(this.r * 255);\n        const g = Math.round(this.g * 255);\n        const b = Math.round(this.b * 255);\n        const hex = (color) => color.toString(16).toUpperCase();\n        return `#${ hex(r) }${ hex(g) }${ hex(b) }`;\n    }\n\n    get cssColor() {\n        // Return rgb(x,y,z) or rgba(x,y,z,w);\n    }\n\n    get aspectRatio() {\n        return this.width / this.height;\n    }\n\n    toString() {\n        switch (this.length) {\n        case 2:\n            return `[${this[0]}, ${this[1]}]`;\n        case 3:\n            return `[${this[0]}, ${this[1]}, ${this[2]}]`;\n        case 4:\n            return `[${this[0]}, ${this[1]}, ${this[2]}, ${this[5]}]`;\n        }\n    }\n\n    static CheckEqualLength(v1,v2) {\n        checkEqualLength(v1,v2);\n    }\n\n    static Max(v1,v2) {\n        checkEqualLength(v1,v2);\n        switch (v1.length) {\n        case 2:\n            return new Vec([\n                v1[0]>v2[0] ? v1[0] : v2[0],\n                v1[1]>v2[1] ? v1[1] : v2[1]\n            ]);\n        case 3:\n            return new Vec([\n                v1[0]>v2[0] ? v1[0] : v2[0],\n                v1[1]>v2[1] ? v1[1] : v2[1],\n                v1[2]>v2[2] ? v1[2] : v2[2]\n            ]);\n        case 4:\n            return new Vec([\n                v1[0]>v2[0] ? v1[0] : v2[0],\n                v1[1]>v2[1] ? v1[1] : v2[1],\n                v1[2]>v2[2] ? v1[2] : v2[2],\n                v1[3]>v2[3] ? v1[3] : v2[3]\n            ]);\n        default:\n            throw new Error(`Invalid vector size: ${ v1.length }`);\n        }\n    }\n\n    static Min(v1,v2) {\n        checkEqualLength(v1,v2);\n        switch (v1.length) {\n        case 2:\n            return new Vec([\n                v1[0]<v2[0] ? v1[0] : v2[0],\n                v1[1]<v2[1] ? v1[1] : v2[1]\n            ]);\n        case 3:\n            return new Vec([\n                v1[0]<v2[0] ? v1[0] : v2[0],\n                v1[1]<v2[1] ? v1[1] : v2[1],\n                v1[2]<v2[2] ? v1[2] : v2[2]\n            ]);\n        case 4:\n            return new Vec([\n                v1[0]<v2[0] ? v1[0] : v2[0],\n                v1[1]<v2[1] ? v1[1] : v2[1],\n                v1[2]<v2[2] ? v1[2] : v2[2],\n                v1[3]<v2[3] ? v1[3] : v2[3]\n            ]);\n        default:\n            throw new Error(`Invalid vector size: ${ v1.length }`);\n        }\n    }\n\n    static Add(v1,v2) {\n        checkEqualLength(v1,v2);\n        switch (v1.length) {\n        case 2:\n            return new Vec([\n                v1[0] + v2[0],\n                v1[1] + v2[1]\n            ]);\n        case 3:\n            return new Vec([\n                v1[0] + v2[0],\n                v1[1] + v2[1],\n                v1[2] + v2[2]\n            ]);\n        case 4:\n            return new Vec([\n                v1[0] + v2[0],\n                v1[1] + v2[1],\n                v1[2] + v2[2],\n                v1[3] + v2[3]\n            ]);\n        default:\n            throw new Error(`Invalid vector size: ${ v1.length }`);\n        }\n    }\n\n    static Sub(v1,v2) {\n        checkEqualLength(v1,v2);\n        switch (v1.length) {\n        case 2:\n            return new Vec([\n                v1[0] - v2[0],\n                v1[1] - v2[1]\n            ]);\n        case 3:\n            return new Vec([\n                v1[0] - v2[0],\n                v1[1] - v2[1],\n                v1[2] - v2[2]\n            ]);\n        case 4:\n            return new Vec([\n                v1[0] - v2[0],\n                v1[1] - v2[1],\n                v1[2] - v2[2],\n                v1[3] - v2[3]\n            ]);\n        default:\n            throw new Error(`Invalid vector size: ${ v1.length }`);\n        }\n    }\n\n    static Magnitude(v) {\n        switch (v.length) {\n        case 2:\n            return Math.sqrt(v[0] * v[0] + v[1] * v[1]);\n        case 3:\n            return Math.sqrt(v[0] * v[0] + v[1] * v[1] + v[2] * v[2]);\n        case 4:\n            return Math.sqrt(v[0] * v[0] + v[1] * v[1] + v[2] * v[2] + v[3] * v[3]);\n        default:\n            throw new Error(`Invalid vector size: ${ v.length }`);\n        }\n    }\n\n    static Distance(v1,v2) {\n        checkEqualLength(v1,v2);\n        return Vec.Magnitude(Vec.Sub(v1,v2));\n    }\n\n    static Dot(v1,v2) {\n        checkEqualLength(v1,v2);\n        switch (v1.length) {\n        case 2:\n            return v1[0] * v2[0] + v1[1] * v2[1];\n        case 3:\n            return v1[0] * v2[0] + v1[1] * v2[1] + v1[2] * v2[2];\n        case 4:\n            return v1[0] * v2[0] + v1[1] * v2[1] + v1[2] * v2[2] + v1[3] * v2[3];\n        default:\n            throw new Error(`Invalid vector size: ${ v1.length }`);\n        }\n    }\n\n    static Cross(v1,v2) {\n        checkEqualLength(v1,v2);\n        switch (v1.length) {\n        case 2:\n            return v1[0] * v2[1] - v1[1] - v2[0];\n        case 3:\n            return new Vec([\n                v1[1] * v2[2] - v1[2] * v2[1],\n                v1[2] * v2[0] - v1[0] * v2[2],\n                v1[0] * v2[1] - v1[1] * v2[0],\n            ]);\n        default:\n            throw new Error(`Invalid vector size for cross product: ${ v1.length }`);\n        }\n    }\n\n    static Normalized(v) {\n        const m = Vec.Magnitude(v);\n        switch (v.length) {\n        case 2:\n            return new Vec([ v[0] / m, v[1] / m ]);\n        case 3:\n            return new Vec([ v[0] / m, v[1] / m, v[2] / m ]);\n        case 4:\n            return new Vec([ v[0] / m, v[1] / m, v[2] / m, v[3] / m ])\n        default:\n            throw new Error(`Invalid vector size: ${ v.length }`);\n        }\n    }\n\n    static Mult(v,s) {\n        switch (v.length) {\n        case 2:\n            return new Vec([ v[0] * s, v[1] * s ]);\n        case 3:\n            return new Vec([ v[0] * s, v[1] * s, v[2] * s ]);\n        case 4:\n            return new Vec([ v[0] * s, v[1] * s, v[2] * s, v[3] * s ]);\n        default:\n            throw new Error(`Invalid vector size: ${ v.length }`);\n        }\n    }\n\n    static Div(v,s) {\n        switch (v.length) {\n        case 2:\n            return new Vec([ v[0] / s, v[1] / s ]);\n        case 3:\n            return new Vec([ v[0] / s, v[1] / s, v[2] / s ]);\n        case 4:\n            return new Vec([ v[0] / s, v[1] / s, v[2] / s, v[3] / s ]);\n        default:\n            throw new Error(`Invalid vector size: ${ v.length }`);\n        }\n    }\n\n    static Equals(v1,v2) {\n        if (v1.length != v2.length) {\n            return false;\n        }\n        else {\n            switch (v1.length) {\n            case 2:\n                return  equals(v1[0], v2[0]) &&\n                        equals(v1[1], v2[1]);\n            case 3:\n                return  equals(v1[0], v2[0]) &&\n                        equals(v1[1], v2[1]) &&\n                        equals(v1[2], v2[2]);\n            case 4:\n                return  equals(v1[0], v2[0]) &&\n                        equals(v1[1], v2[1]) &&\n                        equals(v1[2], v2[2]) &&\n                        equals(v1[3], v2[3]);\n            default:\n                throw new Error(`Invalid vector size: ${ v1.length }`);\n            }\n        }\n    }\n\n    static IsZero(v) {\n        switch (v.length) {\n        case 2:\n            return isZero(v[0]) || isZero(v[1]);\n        case 3:\n            return isZero(v[0]) || isZero(v[1]) || isZero(v[2]);\n        case 4:\n            return isZero(v[0]) || isZero(v[1]) || isZero(v[2]) || isZero(v[3]);\n        default:\n            throw new Error(`Invalid vector size: ${ v.length }`);\n        }\n    }\n\n    static IsNaN(v) {\n        switch (v.length) {\n        case 2:\n            return isNaN(v[0]) || isNaN(v[1]);\n        case 3:\n            return isNaN(v[0]) || isNaN(v[1]) || isNaN(v[2]);\n        case 4:\n            return isNaN(v[0]) || isNaN(v[1]) || isNaN(v[2]) || isNaN(v[3]);\n        default:\n            throw new Error(`Invalid vector size: ${ v.length }`);\n        }\n    }\n\n    /////// Constructors\n    static Vec2() {\n        return new Vec(0,0);\n    }\n\n    static Vec3() {\n        return new Vec(0,0,0);\n    }\n\n    static Vec4() {\n        return new Vec(0,0,0,0);\n    }\n}\n    ","/*\n    Extracted from bg2 engine source code: https://github.com/ferserc1/bg2e-js.git\n    file: bg2e/math/Mat3.js\n */\n\nimport { NumericArray } from \"./constants\";\nimport Vec from \"./Vec\";\nimport { isZero, equals } from \"./functions\";\n\nexport default class Mat3 extends NumericArray {\n    constructor() {\n        if (arguments.length === 9) {\n            super(arguments);\n        }\n        else if (arguments.length === 1 && arguments[0].length === 9) {\n            super(arguments[0]);\n        }\n        else if (arguments.length === 0) {\n            super([0,0,0,0,0,0,0,0,0]);\n        }\n        else {\n            throw new Error(`Invalid parameter size in Mat3 constructor`);\n        }\n    }\n\n    identity() {\n        this[0] = 1; this[1] = 0; this[2] = 0;\n        this[3] = 0; this[4] = 1; this[5] = 0;\n        this[6] = 0; this[7] = 0; this[8] = 1;\n        return this;\n    }\n\n    zero() {\n        this[0] = 0; this[1] = 0; this[2] = 0;\n        this[3] = 0; this[4] = 0; this[5] = 0;\n        this[6] = 0; this[7] = 0; this[8] = 0;\n        return this;\n    }\n\n    row(i) {\n        return new Vec(\n            this[i * 3], \n            this[i * 3 + 1],\n            this[ i* 3 + 2]);\n    }\n\n    setRow(i, a, y = null, z = null) {\n        if (a?.length>=3) {\n            this[i * 3]      = a[0];\n            this[i * 3 + 1]  = a[1];\n            this[i * 3 + 2]  = a[2];\n        }\n        else if (typeof(a) === \"number\" && \n            typeof(y) === \"number\" && \n            typeof(z) === \"number\"\n        ) {\n            this[i * 3]      = a;\n            this[i * 3 + 1]  = y;\n            this[i * 3 + 2]  = z;\n        }\n        else {\n            throw new Error(`Invalid parameter setting matrix row`);\n        }\n        return this;\n    }\n\n    col(i) {\n        return new Vec(\n            this[i],\n            this[i + 3],\n            this[i + 3 * 2]\n        )\n    }\n\n    setCol(i, a, y = null, z = null) {\n        if (a?.length>=3) {\n            this[i]         = a[0];\n            this[i + 3]     = a[1];\n            this[i + 3 * 2] = a[2];\n        }\n        else if (typeof(a) === \"number\" && \n            typeof(y) === \"number\" && \n            typeof(z) === \"number\"\n        ) {\n            this[i]         = a;\n            this[i + 3]     = y;\n            this[i + 3 * 2] = z;\n        }\n        else {\n            throw new Error(`Invalid parameter setting matrix row`);\n        }\n        return this;\n    }\n\n    assign(m) {\n        if (m.length === 9) {\n            this[0] = m[0]; this[1] = m[1]; this[2] = m[2];\n\t\t\tthis[3] = m[3]; this[4] = m[4]; this[5] = m[5];\n\t\t\tthis[6] = m[6]; this[7] = m[7]; this[8] = m[8];\n        }\n        else if (m.length === 16) {\n            this[0] = m[0]; this[1] = m[1]; this[2] = m[2];\n\t\t\tthis[3] = m[4]; this[4] = m[5]; this[5] = m[6];\n\t\t\tthis[6] = m[8]; this[7] = m[9]; this[8] = m[10];\n        }\n        else {\n            throw new Error(`Invalid plarameter setting matrix data`);\n        }\n        return this;\n    }\n\n    setScale(x,y,z) { \n\t\tconst rx = (new Vec(this[0], this[3], this[6])).normalize().scale(x);\n\t\tconst ry = (new Vec(this[1], this[4], this[7])).normalize().scale(y);\n\t\tconst rz = (new Vec(this[2], this[5], this[8])).normalize().scale(z);\n\t\tthis[0] = rx.x; this[3] = rx.y; this[6] = rx.z;\n\t\tthis[1] = ry.x; this[4] = ry.y; this[7] = ry.z;\n\t\tthis[2] = rz.x; this[5] = rz.y; this[8] = rz.z;\n\t\treturn this;\n\t}\n\n    traspose() {\n        const m3 = this[3];  // 0, 1, 2\n        const m7 = this[7];  // 3, 4, 5\n        const m6 = this[6];  // 6, 7, 8\n        this[3] = this[1];\n        this[6] = this[2];\n        this[7] = this[5];\n        this[1] = m3;\n        this[2] = m6;\n        this[5] = m7;\n        return this;\n    }\n\n    mult(a) {\n        if (typeof(a) === \"number\") {\n            this[0] *= a; this[1] *= a; this[2] *= a;\n            this[3] *= a; this[4] *= a; this[5] *= a;\n            this[6] *= a; this[7] *= a; this[8] *= a;\n        }\n        else if (a instanceof NumericArray && a.length === 9) {\n            const r0 = this.row(0);\n            const r1 = this.row(1);\n            const r2 = this.row(2);\n            const c0 = a.col(0);\n            const c1 = a.col(1);\n            const c2 = a.col(2);\n            \n            this[0] = Vec.Dot(r0,c0); this[1] = Vec.Dot(r0,c1); this[2] = Vec.Dot(r0,c2);\n            this[3] = Vec.Dot(r1,c0); this[4] = Vec.Dot(r1,c1); this[5] = Vec.Dot(r1,c2);\n            this[6] = Vec.Dot(r2,c0); this[7] = Vec.Dot(r2,c1); this[8] = Vec.Dot(r2,c2);\n        }\n        else {\n            throw new Error(`Invalid parameter in Mat3.mult()`);\n        }\n        return this;\n    }\n\n    multVector(v) {\n        if (v.length === 2 || v.length === 3) {\n            const x = v[0];\n            const y = v[1];\n            const z = v.length === 2 ? 1 : v[2];\n        \n            return new Vec(\tthis[0] * x + this[3] * y + this[6] * z,\n                            this[1] * x + this[4] * y + this[7] * z,\n                            this[2] * x + this[5] * y + this[8] * z);\n        }\n        else {\n            throw new Error(`Invalid parameter in Mat3.multVector()`);\n        }\n    }\n\n    toString() {\n        return  `[ ${this[0]}, ${this[1]}, ${this[2]}\\n` +\n                `  ${this[3]}, ${this[4]}, ${this[5]}\\n` +\n                `  ${this[6]}, ${this[7]}, ${this[8]} ]`;\n    }\n\n    static MakeIdentity() {\n        const m = new Mat3();\n        return m.identity();\n    }\n\n    static MakeZero() {\n        const m = new Mat3();\n        return m.zero();\n    }\n\n    static MakeWithQuaternion(q) {\n        const m = Mat3.MakeIdentity();\n        \n        m.setRow(0, new Vec( 1  - 2 * q[1] * q[1] - 2 * q[2] * q[2], 2 * q[0] * q[1] - 2 * q[2] * q[3], 2 * q[0] * q[2] + 2 * q[1] * q[3]));\n        m.setRow(1, new Vec( 2 * q[0] * q[1] + 2 * q[2] * q[3], 1  - 2.0 * q[0] * q[0] - 2 * q[2] * q[2], 2 * q[1] * q[2] - 2 * q[0] * q[3]));\n        m.setRow(2, new Vec( 2 * q[0] * q[2] - 2 * q[1] * q[3], 2 * q[1] * q[2] + 2 * q[0] * q[3] , 1 - 2 * q[0] * q[0] - 2 * q[1] * q[1]));\n\n        return m;\n    }\n\n    static IsZero(m) {\n        return\tisZero(v[0]) && isZero(v[1]) && isZero(v[2]) &&\n                isZero(v[3]) && isZero(v[4]) && isZero(v[5]) &&\n                isZero(v[6]) && isZero(v[7]) && isZero(v[8]);\n    }\n    \n    static IsIdentity(m) {\n        return\tequals(v[0], 1) && isZero(v[1]) && isZero(v[2]) &&\n                isZero(v[3]) && equals(v[4], 1) && isZero(v[5]) &&\n                isZero(v[6]) && isZero(v[7]) && equals(v[8], 1);\n    }\n\n    static GetScale(m) {\n        return new Vec(\n            Vec.Magnitude(new Vec(m[0], m[3], m[6])),\n            Vec.Magnitude(new Vec(m[1], m[4], m[7])),\n            Vec.Magnitude(new Vec(m[2], m[5], m[8]))\n        );\n    }\n\n    static Equals(a,b) {\n        return\tequals(a[0], b[0]) && equals(a[1], b[1])  && equals(a[2], b[2]) &&\n                equals(a[3], b[3]) && equals(a[4], b[4])  && equals(a[5], b[5]) &&\n                equals(a[6], b[6]) && equals(a[7], b[7])  && equals(a[8], b[8]);\n    }\n\n    static IsNaN(m) {\n        return\tisNaN(m[0]) || isNaN(m[1]) || isNaN(m[2]) &&\n                isNaN(m[3]) || isNaN(m[4]) || isNaN(m[5]) &&\n                isNaN(m[6]) || isNaN(m[7]) || isNaN(m[8]);\n    }\n};\n","/*\n    Extracted from bg2 engine source code: https://github.com/ferserc1/bg2e-js.git\n    file: bg2e/math/Mat4.js\n */\n\nimport { NumericArray, PI } from \"./constants\";\nimport Vec from \"./Vec\";\nimport Mat3 from \"./Mat3\";\nimport { equals, isZero } from \"./functions\";\n\nexport default class Mat4 extends NumericArray {\n    constructor() {\n        const inMatrix = [\n            0, 0, 0, 0,\n            0, 0, 0, 0,\n            0, 0, 0, 0,\n            0, 0, 0, 0\n        ];\n\n        // Create from matrix3\n        if (arguments.length === 9) {\n            inMatrix[0] = arguments[0]; \n            inMatrix[1] = arguments[1];\n            inMatrix[2] = arguments[2];\n\n            inMatrix[4] = arguments[3]; \n            inMatrix[5] = arguments[4];\n            inMatrix[6] = arguments[5];\n\n            inMatrix[8] = arguments[6]; \n            inMatrix[9] = arguments[7];\n            inMatrix[10] = arguments[8];\n\n            inMatrix[15] = 1;\n        }\n        else if (arguments.length === 1 && arguments[0].length === 9) {\n            inMatrix[0]  = arguments[0][0]; \n            inMatrix[1]  = arguments[0][1];\n            inMatrix[2]  = arguments[0][2];\n\n            inMatrix[4]  = arguments[0][3]; \n            inMatrix[5]  = arguments[0][4];\n            inMatrix[6]  = arguments[0][5];\n\n            inMatrix[8]  = arguments[0][6]; \n            inMatrix[9]  = arguments[0][7];\n            inMatrix[10] = arguments[0][8];\n\n            inMatrix[15] = 1;\n        }\n        // Create from matrix4\n        else if (arguments.length === 16) {\n            inMatrix[0 ] = arguments[0];\n            inMatrix[1 ] = arguments[1 ];\n            inMatrix[2 ] = arguments[2 ];\n            inMatrix[3 ] = arguments[3 ];\n\n            inMatrix[4 ] = arguments[4 ];\n            inMatrix[5 ] = arguments[5 ];\n            inMatrix[6 ] = arguments[6 ];\n            inMatrix[7 ] = arguments[7 ];\n\n            inMatrix[8 ] = arguments[8 ];\n            inMatrix[9 ] = arguments[9 ];\n            inMatrix[10] = arguments[10];\n            inMatrix[11] = arguments[11];\n\n            inMatrix[12] = arguments[12];\n            inMatrix[13] = arguments[13];\n            inMatrix[14] = arguments[14];\n            inMatrix[15] = arguments[15];\n        }\n        else if (arguments.length === 1 && arguments[0].length === 16) {\n            inMatrix[0 ] = arguments[0][0];\n            inMatrix[1 ] = arguments[0][1 ];\n            inMatrix[2 ] = arguments[0][2 ];\n            inMatrix[3 ] = arguments[0][3 ];\n\n            inMatrix[4 ] = arguments[0][4 ];\n            inMatrix[5 ] = arguments[0][5 ];\n            inMatrix[6 ] = arguments[0][6 ];\n            inMatrix[7 ] = arguments[0][7 ];\n\n            inMatrix[8 ] = arguments[0][8 ];\n            inMatrix[9 ] = arguments[0][9 ];\n            inMatrix[10] = arguments[0][10];\n            inMatrix[11] = arguments[0][11];\n\n            inMatrix[12] = arguments[0][12];\n            inMatrix[13] = arguments[0][13];\n            inMatrix[14] = arguments[0][14];\n            inMatrix[15] = arguments[0][15];\n        }\n        else if (arguments.length != 0) {\n            throw new Error(`Invalid parameter size in Matrix3 constructor`);\n        }\n\n        super(inMatrix);\n    }\n\n    ////// Initializers\n    identity() {\n        this[0 ] = 1; this[1 ] = 0; this[2 ] = 0; this[3 ] = 0\n        this[4 ] = 0; this[5 ] = 1; this[6 ] = 0; this[7 ] = 0\n        this[8 ] = 0; this[9 ] = 0; this[10] = 1; this[11] = 0\n        this[12] = 0; this[13] = 0; this[14] = 0; this[15] = 1\n        return this;\n    }\n\n    zero() {\n        this[ 0] = 0; this[ 1] = 0; this[ 2] = 0; this[ 3] = 0;\n        this[ 4] = 0; this[ 5] = 0; this[ 6] = 0; this[ 7] = 0;\n        this[ 8] = 0; this[ 9] = 0; this[10] = 0; this[11] = 0;\n        this[12] = 0; this[13] = 0; this[14] = 0; this[15] = 0;\n        return this;\n    }\n\n    perspective(fovy, aspect, nearPlane, farPlane) {\n        let fovy2 = Math.tan(fovy * PI / 360.0) * nearPlane;\n        let fovy2aspect = fovy2 * aspect;\n        this.frustum(-fovy2aspect,fovy2aspect,-fovy2,fovy2,nearPlane,farPlane);\n        return this;\n    }\n\n    frustum(left, right, bottom, top, nearPlane, farPlane) {\n        let A = right - left;\n        let B = top-bottom;\n        let C = farPlane-nearPlane;\n        \n        this.setRow(0, new Vec(nearPlane*2.0/A,\t0.0,\t0.0,\t0.0));\n        this.setRow(1, new Vec(0.0,\tnearPlane*2.0/B,\t0.0,\t0.0));\n        this.setRow(2, new Vec((right+left)/A,\t(top+bottom)/B,\t-(farPlane+nearPlane)/C,\t-1.0));\n        this.setRow(3, new Vec(0.0,\t0.0,\t-(farPlane*nearPlane*2.0)/C,\t0.0));\n        \n        return this;\n    }\n\n    ortho(left, right, bottom, top, nearPlane, farPlane) {\n        let m = right-left;\n        let l = top-bottom;\n        let k = farPlane-nearPlane;;\n        \n        this[0] = 2/m; this[1] = 0;   this[2] = 0;     this[3] = 0;\n        this[4] = 0;   this[5] = 2/l; this[6] = 0;     this[7] = 0;\n        this[8] = 0;   this[9] = 0;   this[10] = -2/k; this[11]= 0;\n        this[12]=-(left+right)/m; this[13] = -(top+bottom)/l; this[14] = -(farPlane+nearPlane)/k; this[15]=1;\n\n        return this;\n    }\n        \n    lookAt(p_eye, p_center, p_up) {\n        this.identity();\n\n        const y = new Vec(p_up);\n        const z = Vec.Sub(p_eye,p_center);\n        z.normalize();\n        const x = Vec.Cross(y,z);\n        x.normalize();\n        y.normalize();\n\n        this.m00 = x.x;\n        this.m10 = x.y;\n        this.m20 = x.z;\n        this.m30 = -Vec.Dot(x, p_eye);\n        this.m01 = y.x;\n        this.m11 = y.y;\n        this.m21 = y.z;\n        this.m31 = -Vec.Dot(y, p_eye);\n        this.m02 = z.x;\n        this.m12 = z.y;\n        this.m22 = z.z;\n        this.m32 = -Vec.Dot(z, p_eye);\n        this.m03 = 0;\n        this.m13 = 0;\n        this.m23 = 0;\n        this.m33 = 1;\n    \n        return this;\n    }\n\n\n\n\n    ///// Setters and getters\n    get m00() { return this[0]; }\n    get m01() { return this[1]; }\n    get m02() { return this[2]; }\n    get m03() { return this[3]; }\n    get m10() { return this[4]; }\n    get m11() { return this[5]; }\n    get m12() { return this[6]; }\n    get m13() { return this[7]; }\n    get m20() { return this[8]; }\n    get m21() { return this[9]; }\n    get m22() { return this[10]; }\n    get m23() { return this[11]; }\n    get m30() { return this[12]; }\n    get m31() { return this[13]; }\n    get m32() { return this[14]; }\n    get m33() { return this[15]; }\n    \n    set m00(v) { this[0] = v; }\n    set m01(v) { this[1] = v; }\n    set m02(v) { this[2] = v; }\n    set m03(v) { this[3] = v; }\n    set m10(v) { this[4] = v; }\n    set m11(v) { this[5] = v; }\n    set m12(v) { this[6] = v; }\n    set m13(v) { this[7] = v; }\n    set m20(v) { this[8] = v; }\n    set m21(v) { this[9] = v; }\n    set m22(v) { this[10] = v; }\n    set m23(v) { this[11] = v; }\n    set m30(v) { this[12] = v; }\n    set m31(v) { this[13] = v; }\n    set m32(v) { this[14] = v; }\n    set m33(v) { this[15] = v; }\n\n    get mat3() {\n        return new Mat3(this[0], this[1], this[ 2],\n                        this[4], this[5], this[ 6],\n                        this[8], this[9], this[10]);\n    }\n\n    get forwardVector() {\n        return Mat4.TransformDirection(this, new Vec(0.0, 0.0, 1.0));\n    }\n    \n    get rightVector() {\n        return Mat4.TransformDirection(this, new Vec(1.0, 0.0, 0.0));\n    }\n    \n    get upVector() {\n        return Mat4.TransformDirection(this, new Vec(0.0, 1.0, 0.0));\n    }\n    \n    get backwardVector() {\n        return Mat4.TransformDirection(this, new Vec(0.0, 0.0, -1.0));\n    }\n    \n    get leftVector() {\n        return Mat4.TransformDirection(this, new Vec(-1.0, 0.0, 0.0));\n    }\n    \n    get downVector() {\n        return Mat4.TransformDirection(this, new Vec(0.0, -1.0, 0.0));\n    }\n\n    row(i) {\n        return new Vec(\n            this[i * 4], \n            this[i * 4 + 1],\n            this[i * 4 + 2],\n            this[i * 4 + 3]);\n    }\n\n    setRow(i, a, y = null, z = null, w = null) {\n        if (a.length>=4) {\n            this[i * 4]      = a[0];\n            this[i * 4 + 1]  = a[1];\n            this[i * 4 + 2]  = a[2];\n            this[i * 4 + 3]  = a[3];\n        }\n        else if (typeof(a) === \"number\" && \n            typeof(y) === \"number\" && \n            typeof(z) === \"number\" &&\n            typeof(w) === \"number\"\n        ) {\n            this[i * 4]      = a;\n            this[i * 4 + 1]  = y;\n            this[i * 4 + 2]  = z;\n            this[i * 4 + 3]  = w;\n        }\n        else {\n            throw new Error(`Invalid parameter setting matrix row`);\n        }\n        return this;\n    }\n\n    col(i) {\n        return new Vec(\n            this[i],\n            this[i + 4],\n            this[i + 4 * 2],\n            this[i + 4 * 3]\n        )\n    }\n\n    setCol(i, a, y = null, z = null, w = null) {\n        if (a.length>=4) {\n            this[i]         = a[0];\n            this[i + 4]     = a[1];\n            this[i + 4 * 2] = a[2];\n            this[i + 4 * 3] = a[3];\n        }\n        else if (typeof(a) === \"number\" && \n            typeof(y) === \"number\" && \n            typeof(z) === \"number\" &&\n            typeof(w) === \"number\"\n        ) {\n            this[i]         = a;\n            this[i + 4]     = y;\n            this[i + 4 * 2] = z;\n            this[i + 4 * 3] = w;\n        }\n        else {\n            throw new Error(`Invalid parameter setting matrix row`);\n        }\n        return this;\n    }\n\n    assign(a) {\n        if (a.length==9) {\n            this[0]  = a[0]; this[1]  = a[1]; this[2]  = a[2]; this[3]  = 0;\n            this[4]  = a[3]; this[5]  = a[4]; this[6]  = a[5]; this[7]  = 0;\n            this[8]  = a[6]; this[9]  = a[7]; this[10] = a[8]; this[11] = 0;\n            this[12] = 0;\t this[13] = 0;\t  this[14] = 0;\t   this[15] = 1;\n        }\n        else if (a.length==16) {\n            this[0]  = a[0];  this[1]  = a[1];  this[2]  = a[2];  this[3]  = a[3];\n            this[4]  = a[4];  this[5]  = a[5];  this[6]  = a[6];  this[7]  = a[7];\n            this[8]  = a[8];  this[9]  = a[9];  this[10] = a[10]; this[11] = a[11];\n            this[12] = a[12]; this[13] = a[13];\tthis[14] = a[14]; this[15] = a[15];\n        }\n        return this;\n    }\n\n    translate(x, y, z) {\n        this.mult(Mat4.MakeTranslation(x, y, z));\n        return this;\n    }\n\n    rotate(alpha, x, y, z) {\n        this.mult(Mat4.MakeRotation(alpha, x, y, z));\n        return this;\n    }\n    \n    scale(x, y, z) {\n        this.mult(Mat4.MakeScale(x, y, z));\n        return this;\n    }\n\n    toString() {\n        return  `[ ${this[ 0]}, ${this[ 1]}, ${this[ 2]}, ${this[ 3]}\\n` +\n                `  ${this[ 4]}, ${this[ 5]}, ${this[ 6]}, ${this[ 7]}\\n` +\n                `  ${this[ 8]}, ${this[ 9]}, ${this[10]}, ${this[11]}\\n` +\n                `  ${this[12]}, ${this[13]}, ${this[14]}, ${this[15]} ]`;\n    }\n\n    setScale(x,y,z) {\n        const rx = new Vec(this[0], this[4], this[8]).normalize().scale(x);\n        const ry = new Vec(this[1], this[5], this[9]).normalize().scale(y);\n        const rz = new Vec(this[2], this[6], this[10]).normalize().scale(z);\n        this[0] = rx.x; this[4] = rx.y; this[8] = rx.z;\n        this[1] = ry.x; this[5] = ry.y; this[9] = ry.z;\n        this[2] = rz.x; this[6] = rz.y; this[10] = rz.z;\n        return this;\n    }\n\n    setPosition(pos,y,z) {\n        if (typeof(pos)==\"number\") {\n            this[12] = pos;\n            this[13] = y;\n            this[14] = z;\n        }\n        else {\n            this[12] = pos.x;\n            this[13] = pos.y;\n            this[14] = pos.z;\n        }\n        return this;\n    }\n\n    mult(a) {\n        if (typeof(a)=='number') {\n            this[ 0] *= a; this[ 1] *= a; this[ 2] *= a; this[ 3] *= a;\n            this[ 4] *= a; this[ 5] *= a; this[ 6] *= a; this[ 7] *= a;\n            this[ 8] *= a; this[ 9] *= a; this[10] *= a; this[11] *= a;\n            this[12] *= a; this[13] *= a; this[14] *= a; this[15] *= a;\n            return this;\n        }\n\n        const r0 = this.row(0);\n        const r1 = this.row(1);\n        const r2 = this.row(2);\n        const r3 = this.row(3);\n        const c0 = a.col(0);\n        const c1 = a.col(1);\n        const c2 = a.col(2);\n        const c3 = a.col(3);\n\n        this[0 ] = Vec.Dot(r0, c0); this[1 ] = Vec.Dot(r0, c1); this[2 ] = Vec.Dot(r0, c2); this[3 ] = Vec.Dot(r0, c3);\n        this[4 ] = Vec.Dot(r1, c0); this[5 ] = Vec.Dot(r1, c1); this[6 ] = Vec.Dot(r1, c2); this[7 ] = Vec.Dot(r1, c3);\n        this[8 ] = Vec.Dot(r2, c0); this[9 ] = Vec.Dot(r2, c1); this[10] = Vec.Dot(r2, c2); this[11] = Vec.Dot(r2, c3);\n        this[12] = Vec.Dot(r3, c0); this[13] = Vec.Dot(r3, c1); this[14] = Vec.Dot(r3, c2); this[15] = Vec.Dot(r3, c3);\n\n        return this;\n    }\n\n    multVector(vec) {\n        if (vec.length<3) {\n            throw new Error(\"Invalid parameter multiplying Mat4 by vector\");\n        }\n\n        const x = vec[0];\n        const y = vec[1];\n        const z = vec[2];\n        const w = vec.length >3 ? vec[3] : 1.0;\n    \n        return new Vec( this[0] * x + this[4] * y + this[ 8] * z + this[12] * w,\n                        this[1] * x + this[5] * y + this[ 9] * z + this[13] * w,\n                        this[2] * x + this[6] * y + this[10] * z + this[14] * w,\n                        this[3] * x + this[7] * y + this[11] * z + this[15] * w);\n    }\n    \n    invert() {\n        const a00 = this[0],  a01 = this[1],  a02 = this[2],  a03 = this[3],\n                a10 = this[4],  a11 = this[5],  a12 = this[6],  a13 = this[7],\n                a20 = this[8],  a21 = this[9],  a22 = this[10], a23 = this[11],\n                a30 = this[12], a31 = this[13], a32 = this[14], a33 = this[15];\n\n        const b00 = a00 * a11 - a01 * a10,\n                b01 = a00 * a12 - a02 * a10,\n                b02 = a00 * a13 - a03 * a10,\n                b03 = a01 * a12 - a02 * a11,\n                b04 = a01 * a13 - a03 * a11,\n                b05 = a02 * a13 - a03 * a12,\n                b06 = a20 * a31 - a21 * a30,\n                b07 = a20 * a32 - a22 * a30,\n                b08 = a20 * a33 - a23 * a30,\n                b09 = a21 * a32 - a22 * a31,\n                b10 = a21 * a33 - a23 * a31,\n                b11 = a22 * a33 - a23 * a32;\n\n        let det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n        if (!det) {\n            this.zero();\n        }\n        else {\n            det = 1.0 / det;\n\n            this[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n            this[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n            this[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n            this[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n            this[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n            this[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n            this[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n            this[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n            this[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n            this[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n            this[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n            this[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n            this[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n            this[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n            this[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n            this[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n        }\n\n        return this;\n    }\n    \n    traspose() {\n        const r0 = new Vec(this[0], this[4], this[ 8], this[12]);\n        const r1 = new Vec(this[1], this[5], this[ 9], this[13]);\n        const r2 = new Vec(this[2], this[6], this[10], this[14]);\n        const r3 = new Vec(this[3], this[7], this[11], this[15]);\n    \n        this.setRow(0, r0);\n        this.setRow(1, r1);\n        this.setRow(2, r2);\n        this.setRow(3, r3);\n        return this;\n    }\n\n    ///////// Factory methods\n    static MakeIdentity() {\n        const m = new Mat4();\n        return m.identity();\n    }\n\n    static MakeZero() {\n        const m = new Mat4();\n        return m.zero();\n    }\n\n    static MakeWithQuaternion(q) {\n        const m = Mat4.MakeIdentity();\n        \n        m.setRow(0, new Vec( 1  - 2 * q[1] * q[1] - 2 * q[2] * q[2], 2 * q[0] * q[1] - 2 * q[2] * q[3], 2 * q[0] * q[2] + 2 * q[1] * q[3], 0));\n        m.setRow(1, new Vec( 2 * q[0] * q[1] + 2 * q[2] * q[3], 1  - 2.0 * q[0] * q[0] - 2 * q[2] * q[2], 2 * q[1] * q[2] - 2 * q[0] * q[3], 0));\n        m.setRow(2, new Vec( 2 * q[0] * q[2] - 2 * q[1] * q[3], 2 * q[1] * q[2] + 2 * q[0] * q[3] , 1 - 2 * q[0] * q[0] - 2 * q[1] * q[1], 0));//\n        return m;\n    }\n    \n    static MakeTranslation(x, y, z) {\n        if (x instanceof NumericArray && x.length >= 3) {\n            y = x[1];\n            z = x[2];\n            x = x[0];\n        }\n        return new Mat4(\n            1.0, 0.0, 0.0, 0.0,\n            0.0, 1.0, 0.0, 0.0,\n            0.0, 0.0, 1.0, 0.0,\n                x,   y,   z, 1.0\n        );\n    }\n        \n    static MakeRotation(alpha, x, y, z) {\n        const axis = new Vec(x,y,z);\n        axis.normalize();\n                \n        var cosAlpha = Math.cos(alpha);\n        var acosAlpha = 1.0 - cosAlpha;\n        var sinAlpha = Math.sin(alpha);\n        \n        return new Mat4(\n            axis.x * axis.x * acosAlpha + cosAlpha, axis.x * axis.y * acosAlpha + axis.z * sinAlpha, axis.x * axis.z * acosAlpha - axis.y * sinAlpha, 0,\n            axis.y * axis.x * acosAlpha - axis.z * sinAlpha, axis.y * axis.y * acosAlpha + cosAlpha, axis.y * axis.z * acosAlpha + axis.x * sinAlpha, 0,\n            axis.z * axis.x * acosAlpha + axis.y * sinAlpha, axis.z * axis.y * acosAlpha - axis.x * sinAlpha, axis.z * axis.z * acosAlpha + cosAlpha, 0,\n            0,0,0,1\n        );\n    }\n\n    static MakeScale(x, y, z) {\n        if (x instanceof NumericArray  && x.length >= 3) {\n            y = x[1];\n            z = x[2];\n            x = x[0];\n        }\n        return new Mat4(\n            x, 0, 0, 0,\n            0, y, 0, 0,\n            0, 0, z, 0,\n            0, 0, 0, 1\n        )\n    }\n    \n\n    static MakePerspective(fovy, aspect, nearPlane, farPlane) {\n        return (new Mat4()).perspective(fovy, aspect, nearPlane, farPlane);\n    }\n    \n    static MakeFrustum(left, right, bottom, top, nearPlane, farPlane) {\n        return (new Mat4()).frustum(left, right, bottom, top, nearPlane, farPlane);\n    }\n    \n    static MakeOrtho(left, right, bottom, top, nearPlane, farPlane) {\n        return (new Mat4()).ortho(left, right, bottom, top, nearPlane, farPlane);\n    }\n\n    static MakeLookAt(origin, target, up) {\n        return (new Mat4()).lookAt(origin,target,up);\n    }\n\n    // Other static methods\n    static Mult(A,B) {\n        const result = new Mat4(A);\n        return result.mult(B);\n    }\n\n    static Unproject(x, y, depth, mvMat, pMat, viewport) {\n        let mvp = new Mat4(pMat);\n        mvp.mult(mvMat);\n        mvp.invert();\n\n        const vin = new Vec(((x - viewport.y) / viewport.width) * 2.0 - 1.0,\n                                ((y - viewport.x) / viewport.height) * 2.0 - 1.0,\n                                depth * 2.0 - 1.0,\n                                1.0);\n        \n        const result = new Vec4(mvp.multVector(vin));\n        if (result.z==0) {\n            result.set(0);\n        }\n        else {\n            result.set(\tresult.x/result.w,\n                        result.y/result.w,\n                        result.z/result.w,\n                        result.w/result.w);\n        }\n\n        return result;\n    }\n\n    static GetScale(m) {\n        return new Vec(\n            Vec.Magnitude([m[1], m[5], m[9]]),\n            Vec.Magnitude([m[0], m[4], m[8]]),\n            Vec.Magnitude([m[2], m[6], m[10]])\n        );\n    }\n\n    static GetRotation(m) {\n        const scale = Mat4.GetScale(m);\n        return new Mat4(\n                m[0] / scale.x, m[1] / scale.y, m[ 2] / scale.z, 0,\n                m[4] / scale.x, m[5] / scale.y, m[ 6] / scale.z, 0,\n                m[8] / scale.x, m[9] / scale.y, m[10] / scale.z, 0,\n                0,\t   0,\t  0, \t1\n        );\n    }\n\n    static GetPosition(m) {\n        return new Vec(m[12], m[13], m[14]);\n    }\n\n    static GetInverted(m) {\n        const inverted = new Mat4(m);\n        inverted.invert();\n        return inverted;\n    }\n\n    static GetNormalMatrix(m) {\n        return new Mat4(m)\n            .invert()\n            .traspose()\n            .mat3;\n    }\n    \n    static Equals(m,n) {\n        return\tm[ 0] == n[ 0] && m[ 1] == n[ 1] && m[ 2] == n[ 2] && m[ 3] == n[ 3] &&\n                m[ 4] == n[ 4] && m[ 5] == n[ 5] && m[ 6] == n[ 6] && m[ 7] == n[ 7] &&\n                m[ 8] == n[ 8] && m[ 9] == n[ 9] && m[10] == n[10] && m[11] == n[11] &&\n                m[12] == n[12] && m[13] == n[13] && m[14] == n[14] && m[15] == n[15];\n    }\n\n    static TransformDirection(M, /* Vec */ dir) {\n        const direction = new Vec(dir);\n        const trx = new Mat4(M);\n        trx.setRow(3, new Vec(0, 0, 0, 1));\n        direction.assign(trx.multVector(direction).xyz);\n        direction.normalize();\n        return direction;\n    }\n\n    static IsNan() {\n        return\tisNaN(this[ 0]) || isNaN(this[ 1]) || isNaN(this[ 2]) || isNaN(this[ 3]) ||\n                isNaN(this[ 4]) || isNaN(this[ 5]) || isNaN(this[ 6]) || isNaN(this[ 7]) ||\n                isNaN(this[ 8]) || isNaN(this[ 9]) || isNaN(this[10]) || isNaN(this[11]) ||\n                isNaN(this[12]) || isNaN(this[13]) || isNaN(this[14]) || isNaN(this[15]);\n    }\n\n    static IsZero(m) {\n        return\tisZero(m[ 0]) && isZero(m[ 1]) && isZero(m[ 2]) && isZero(m[ 3]) &&\n                isZero(m[ 4]) && isZero(m[ 5]) && isZero(m[ 6]) && isZero(m[ 7]) &&\n                isZero(m[ 8]) && isZero(m[ 9]) && isZero(m[10]) && isZero(m[11]) &&\n                isZero(m[12]) && isZero(m[13]) && isZero(m[14]) && isZero(m[15]);\n    }\n    \n    static IsIdentity(m) {\n        return\tequals(m[ 0],1) && equals(m[ 1],0) && equals(m[ 2],0) && equals(m[ 3],0) &&\n                equals(m[ 4],0) && equals(m[ 5],1) && equals(m[ 6],0) && equals(m[ 7],0) &&\n                equals(m[ 8],0) && equals(m[ 9],0) && equals(m[10],1) && equals(m[11],0) &&\n                equals(m[12],0) && equals(m[13],0) && equals(m[14],0) && equals(m[15],1);\n    }\n}\n","import { CanvasPlugin, Canvas, createElementWithHtmlText } from 'paella-core';\nimport WebGLCanvas from '../js/WebGLCanvas';\nimport Shader from '../js/Shader';\nimport SceneObject from '../js/SceneObject';\nimport VideoTexture from '../js/VideoTexture';\nimport { createSphere } from '../js/primitives';\nimport Mat4 from '../js/math/Mat4';\nimport WebGLPluginsModule from './WebGLPluginModule';\n\nconst vertex = `\nprecision highp float;\nattribute vec3 inVertexPos;\nattribute vec2 inTexCoord;\n\nvarying vec2 fsTexCoord;\n\nuniform mat4 uView;\nuniform mat4 uProj;\n\nvoid main() {\n    gl_Position = uProj * uView * vec4(inVertexPos,1.0);\n    fsTexCoord = inTexCoord;\n}\n`;\n\nconst fragment = `\nprecision highp float;\nuniform sampler2D uVideoTexture;\n\nvarying vec2 fsTexCoord;\n\nvoid main() {\n    gl_FragColor = texture2D(uVideoTexture,fsTexCoord);\n}\n`;\n\nconst removeVideoElement = (video, debug = false) => {\n    const playerParent = video.parentNode;\n    playerParent.removeChild(video);\n    document.body.appendChild(video);\n    video.style.position = \"fixed\";\n    video.style.width = \"100px\";\n    video.style.height = \"50px\";\n    video.style.top = \"0px\";\n    video.style.left = \"0px\";\n    if (!debug) {\n        video.style.display = \"none\";\n    }\n}\n\nexport class Video360Canvas extends Canvas {\n    constructor(player, videoContainer, config) {\n        super('canvas', player, videoContainer);\n        this.config = config;\n        this.maxZoom = config.maxZoom ?? 3;\n        this.minZoom = config.minZoom ?? 0.3;\n        this.speedX = config.speedX ?? 1;\n        this.speedY = config.speedY ?? 1;\n\n        let downPosition = [0,0];\n        let drag = false;\n        this._pitch = 0;\n        this._yaw = 0;\n        this.element.addEventListener('mousedown', evt => {\n            drag = true;\n            downPosition = [evt.clientX, evt.clientY];\n            evt.stopPropagation();\n        });\n\n        this.element.addEventListener('click', evt => {\n            evt.stopPropagation();\n        });\n\n        this.element.addEventListener('mouseup', evt => {\n            drag = false;\n            evt.stopPropagation();\n        });\n\n        this.element.addEventListener('wheel', evt => {\n            this.currentZoom += evt.deltaY / 1000;\n            if (this.currentZoom > this.maxZoom) {\n                this.currentZoom = this.maxZoom;\n            }\n            else if (this.currentZoom < this.minZoom) {\n                this.currentZoom = this.minZoom;\n            }\n            evt.stopPropagation();\n            evt.preventDefault();\n        });\n\n        this.element.addEventListener('mouseout', evt => {\n            drag = false;\n            evt.stopPropagation();\n        });\n\n        this.element.addEventListener('mousemove', evt => {\n            if (drag) {\n                const newPos = [evt.clientX, evt.clientY];\n                const diff = [downPosition[0] - newPos[0], downPosition[1] - newPos[1]];\n                downPosition = newPos;\n                this._yaw += diff[0] * 0.004 * this.speedX;\n                this._pitch += diff[1] * 0.004 * this.speedY;\n                if (this._yaw>2*Math.PI) {\n                    this._yaw = this._yaw - 2 * Math.PI;\n                }\n                else if (this._yaw<0) {\n                    this._yaw = 2 * Math.PI + this._yaw;\n                }\n\n                if (this._pitch>Math.PI / 2) {\n                    this._pitch = Math.PI / 2;\n                }\n                else if (this._pitch<=-Math.PI / 2) {\n                    this._pitch = -Math.PI / 2;\n                }\n\n            }\n            evt.stopPropagation();\n        });\n    }\n\n    async loadCanvas(player) {\n        this.currentZoom = 1;\n        this._videoPlayer = player;\n\n        player.element.style.width = \"100%\";\n        player.element.style.height = \"100%\";\n        player.element.style.position = \"absolute\";\n        player.element.style.top = \"0\";\n        player.element.style.left = \"0\";\n\n        this.element.style.overflow = \"hidden\";\n        this.element.style.position = \"relative\";\n\n        this._videoPlayer = player;\n        player.element.crossOrigin = \"\";\n        removeVideoElement.apply(this, [player.element, false])\n\n        this._webGLCanvas = new WebGLCanvas(this.element);\n        await this._webGLCanvas.init({ clearColor: [0.2, 0.3, 0.8, 1] });\n\n        const { gl } = this._webGLCanvas;\n\n        const videoTexture = new VideoTexture(gl, player.element);\n\n        const shader = new Shader(gl, { \n            vertex, fragment, \n            attribs: [ 'inVertexPos', 'inTexCoord' ], \n            uniforms: [ 'uView', 'uProj', 'uVideoTexture' ]\n        });\n\n        const sphereData = createSphere(30);\n        const sphere = new SceneObject(gl, sphereData.positions, sphereData.uvs, sphereData.triangles);\n        \n        const canvas = this.element;\n        const draw = () => {\n            const w = canvas.clientWidth;\n            const h = canvas.clientHeight;\n\n            const fov = 45 * this.currentZoom;\n            const aspectRatio = w / h;\n            const projection = Mat4.MakePerspective(fov, isNaN(aspectRatio) ? 16/9 : aspectRatio, 0.01, 10.0);\n            const view = Mat4.MakeIdentity();\n            const model = Mat4.MakeRotation(this._yaw, 0, 1, 0);\n            model.rotate(this._pitch, 1, 0, 0);\n\n            videoTexture.updateTexture();\n            canvas.width = w;\n            canvas.height = h;\n            gl.viewport(0, 0, w, h);\n            gl.clear(gl.COLOR_BUFFER_BIT);\n    \n            shader.useProgram();\n            shader.enablePositionArray('inVertexPos', sphere);\n            shader.enableTexCoordArray('inTexCoord', sphere);\n            shader.bindMatrix4('uView', Mat4.Mult(model,view));\n            shader.bindMatrix4('uProj', projection);\n            shader.bindTexture('uVideoTexture', videoTexture.texture);\n            sphere.draw();\n            requestAnimationFrame(draw);    \n        }\n        draw();\n    }\n}\n\nexport default class Video360CanvasPlugin extends CanvasPlugin {\n    getPluginModuleInstance() {\n        return WebGLPluginsModule.Get();\n    }\n\n    get name() {\n        return super.name || \"es.upv.paella.video360Canvas\";\n    }\n\n    get canvasType() { return \"video360\"; }\n\n    isCompatible(stream) {\n        if (stream.canvas?.find(c => c == this.canvasType)) {\n            return true;\n        }\n        \n        return super.isCompatible(stream);\n    }\n\n    getCanvasInstance(videoContainer) {\n        return new Video360Canvas(this.player, videoContainer, this.config);\n    }\n}\n","var map = {\n\t\"./WebGLPluginModule.js\": 323,\n\t\"./es.upv.paella.video360Canvas.js\": 503\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 757;","module.exports = __WEBPACK_EXTERNAL_MODULE__995__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","\nimport Video360Canvas from './plugins/es.upv.paella.video360Canvas';\n\nexport default function getWebGLPluginsContext() {\n    return require.context(\"./plugins\", true, /\\.js/)\n}\n\nexport const webglPlugins = [\n    {\n        plugin: Video360Canvas,\n        config: {\n            enabled: false\n        }\n    }\n];\n\nexport const Video360CanvasPlugin = Video360Canvas;\n"],"names":["root","factory","exports","module","require","define","amd","undefined","self","__WEBPACK_EXTERNAL_MODULE__995__","g_pluginModule","WebGLPluginsModule","PluginModule","WebGLCanvas","canvas","this","gl","getContext","Error","clearColor","enable","DEPTH_TEST","clear","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","loadShader","type","source","shader","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","console","error","getShaderInfoLog","Shader","vertex","fragment","attribs","uniforms","vShader","VERTEX_SHADER","fShader","FRAGMENT_SHADER","shaderProgram","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","deleteShader","_shaderProgram","forEach","attrib","getAttribLocation","warn","uniform","getUniformLocation","useProgram","attribName","vertexBuffer","bindPositions","enableArray","bindTexCoord","numComponents","enableVertexAttribArray","vertexAttribPointer","FLOAT","uniformName","texture","activeTexture","TEXTURE0","bindTexture","TEXTURE_2D","uniform1i","value","uniform1f","uniformMatrix4fv","createVertexBuffer","vertexData","result","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","Float32Array","STATIC_DRAW","SceneObject","position","texCoord","index","positionArray","positionBuffer","texCoordArray","texCoordBuffer","indexArray","indexBuffer","indexData","ELEMENT_ARRAY_BUFFER","Uint16Array","createIndexBuffer","drawElements","TRIANGLES","length","UNSIGNED_SHORT","VideoTexture","video","createTexture","pixel","Uint8Array","texImage2D","RGBA","UNSIGNED_BYTE","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","LINEAR","TWO_PI","Math","PI","QUARTER_TURN","inverseLerp","start","end","createSphere","density","radius","lat","lng","radsPerUnit","sliceVertCount","positions","uvs","latitude","i","v","longitude","vertLength","j","push","cos","sin","colors","triangles","ringStartP","ring","vertexBump","sliceVert","thisP","nextP","nextRingP","nextRingNextP","flat","normals","NumericArray","checkZero","Float64Array","Date","now","isZero","equals","a","b","abs","checkEqualLength","v1","v2","Vec","arguments","m","Magnitude","src","x","y","z","w","s","h","r","round","g","hex","color","toString","toUpperCase","width","height","sqrt","Sub","isNaN","Mat3","rx","normalize","scale","ry","rz","m3","m7","m6","r0","row","r1","r2","c0","col","c1","c2","Dot","identity","zero","q","MakeIdentity","setRow","Mat4","inMatrix","fovy","aspect","nearPlane","farPlane","fovy2","tan","fovy2aspect","frustum","left","right","bottom","top","A","B","C","l","k","p_eye","p_center","p_up","Cross","m00","m10","m20","m30","m01","m11","m21","m31","m02","m12","m22","m32","m03","m13","m23","m33","TransformDirection","mult","MakeTranslation","alpha","MakeRotation","MakeScale","pos","r3","c3","vec","a00","a01","a02","a03","a10","a11","a12","a13","a20","a21","a22","a23","a30","a31","a32","a33","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","det","axis","cosAlpha","acosAlpha","sinAlpha","perspective","ortho","origin","target","up","lookAt","depth","mvMat","pMat","viewport","mvp","invert","vin","Vec4","multVector","set","GetScale","inverted","traspose","mat3","n","M","dir","direction","trx","assign","xyz","removeVideoElement","debug","playerParent","parentNode","removeChild","document","body","appendChild","style","display","Video360Canvas","player","videoContainer","config","maxZoom","minZoom","speedX","speedY","downPosition","drag","_pitch","_yaw","element","addEventListener","evt","clientX","clientY","stopPropagation","currentZoom","deltaY","preventDefault","newPos","diff","_videoPlayer","overflow","crossOrigin","apply","_webGLCanvas","init","videoTexture","sphereData","sphere","draw","clientWidth","clientHeight","fov","aspectRatio","projection","MakePerspective","view","model","rotate","updateTexture","enablePositionArray","enableTexCoordArray","bindMatrix4","Mult","requestAnimationFrame","Canvas","Video360CanvasPlugin","stream","find","c","canvasType","CanvasPlugin","map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","code","keys","Object","resolve","__webpack_module_cache__","moduleId","cachedModule","__webpack_modules__","d","definition","key","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","getWebGLPluginsContext","webglPlugins","plugin","enabled"],"sourceRoot":""}